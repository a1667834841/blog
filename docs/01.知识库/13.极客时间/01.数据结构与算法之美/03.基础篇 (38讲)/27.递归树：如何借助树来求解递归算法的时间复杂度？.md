---
author: 王争
article: false
sidebar: true
tags: 
  - 极客时间
title: 递归树：如何借助树来求解递归算法的时间复杂度？
date: 2022-06-08 18:25:16
permalink: /pages/cb70a7/
---
 
#         27 | 递归树：如何借助树来求解递归算法的时间复杂度？      
今天，我们来讲树这种数据结构的一种特殊应用，递归树。
我们都知道，递归代码的时间复杂度分析起来很麻烦。我们在<a href="https://time.geekbang.org/column/article/41913">第 12 节《排序（下）》</a>那里讲过，如何利用递推公式，求解归并排序、快速排序的时间复杂度，但是，有些情况，比如快排的平均时间复杂度的分析，用递推公式的话，会涉及非常复杂的数学推导。
除了用递推公式这种比较复杂的分析方法，有没有更简单的方法呢？今天，我们就来学习另外一种方法，<strong>借助递归树来分析递归算法的时间复杂度</strong>。
## 递归树与时间复杂度分析
我们前面讲过，递归的思想就是，将大问题分解为小问题来求解，然后再将小问题分解为小小问题。这样一层一层地分解，直到问题的数据规模被分解得足够小，不用继续递归分解为止。
如果我们把这个一层一层的分解过程画成图，它其实就是一棵树。我们给这棵树起一个名字，叫作<strong>递归树</strong>。我这里画了一棵斐波那契数列的递归树，你可以看看。节点里的数字表示数据的规模，一个节点的求解可以分解为左右子节点两个问题的求解。
![图片](https://static001.geekbang.org/resource/image/1d/a3/1d9648b7f43e430473d76d24803159a3.jpg)
通过这个例子，你对递归树的样子应该有个感性的认识了，看起来并不复杂。现在，我们就来看，<strong>如何用递归树来求解时间复杂度</strong>。
归并排序算法你还记得吧？它的递归实现代码非常简洁。现在我们就借助归并排序来看看，如何用递归树，来分析递归代码的时间复杂度。
归并排序的原理我就不详细介绍了，如果你忘记了，可以回看一下第 12 节的内容。归并排序每次会将数据规模一分为二。我们把归并排序画成递归树，就是下面这个样子：
![图片](https://static001.geekbang.org/resource/image/c6/d0/c66bfc3d02d3b7b8f64c208bf4c948d0.jpg)
因为每次分解都是一分为二，所以代价很低，我们把时间上的消耗记作常量 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1000.43em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="mn" id="MathJax-Span-3" style="font-family: MathJax_Main;">1</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.944em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-1"></script>。归并算法中比较耗时的是归并操作，也就是把两个子数组合并为大数组。从图中我们可以看出，每一层归并操作消耗的时间总和是一样的，跟要排序的数据规模有关。我们把每一层归并操作消耗的时间记作 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4" style="width: 0.802em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.614em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.744em, 1000.61em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-5"><span class="mi" id="MathJax-Span-6" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.709em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-2"></script>。
现在，我们只需要知道这棵树的高度 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-7" style="width: 0.708em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.567em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1000.57em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-8"><span class="mi" id="MathJax-Span-9" style="font-family: MathJax_Math-italic;">h</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>h</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"></script>，用高度 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-10" style="width: 0.708em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.567em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1000.57em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-11"><span class="mi" id="MathJax-Span-12" style="font-family: MathJax_Math-italic;">h</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>h</mi></math></span></span><script type="math/tex" id="MathJax-Element-4"></script> 乘以每一层的时间消耗 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-13" style="width: 0.802em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.614em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.744em, 1000.61em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-14"><span class="mi" id="MathJax-Span-15" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.709em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-5"></script>，就可以得到总的时间复杂度 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-6-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-16" style="width: 4.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.72em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1003.63em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-17"><span class="mi" id="MathJax-Span-18" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-19" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-20" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-21" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mi" id="MathJax-Span-22" style="font-family: MathJax_Math-italic; padding-left: 0.238em;">h</span><span class="mo" id="MathJax-Span-23" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>∗</mo><mi>h</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-6"></script>。
从归并排序的原理和递归树，可以看出来，归并排序递归树是一棵满二叉树。我们前两节中讲到，满二叉树的高度大约是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-7-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;msub&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mrow class=&#34;MJX-TeXAtom-ORD&#34;&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-24" style="width: 3.155em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.496em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1002.5em, 2.685em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-25"><span class="msubsup" id="MathJax-Span-26"><span style="display: inline-block; position: relative; width: 1.696em; height: 0px;"><span style="position: absolute; clip: rect(3.155em, 1001.27em, 4.332em, -999.998em); top: -3.998em; left: 0em;"><span class="mi" id="MathJax-Span-27" style="font-family: MathJax_Main;">log</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; top: -3.762em; left: 1.273em;"><span class="texatom" id="MathJax-Span-28"><span class="mrow" id="MathJax-Span-29"><span class="mn" id="MathJax-Span-30" style="font-size: 70.7%; font-family: MathJax_Main;">2</span></span></span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span></span></span><span class="mo" id="MathJax-Span-31"></span><span class="mi" id="MathJax-Span-32" style="font-family: MathJax_Math-italic; padding-left: 0.191em;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.297em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>log</mi><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo>⁡</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-7"></script>，所以，归并排序递归实现的时间复杂度就是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-8-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-33" style="width: 5.555em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.426em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1004.33em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-34"><span class="mi" id="MathJax-Span-35" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-36" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-37" style="font-family: MathJax_Math-italic;">n</span><span class="mi" id="MathJax-Span-38" style="font-family: MathJax_Main; padding-left: 0.191em;">log</span><span class="mo" id="MathJax-Span-39"></span><span class="mi" id="MathJax-Span-40" style="font-family: MathJax_Math-italic; padding-left: 0.191em;">n</span><span class="mo" id="MathJax-Span-41" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-8"></script>。我这里的时间复杂度都是估算的，对树的高度的计算也没有那么精确，但是这并不影响复杂度的计算结果。
利用递归树的时间复杂度分析方法并不难理解，关键还是在实战，所以，接下来我会通过三个实际的递归算法，带你实战一下递归的复杂度分析。学完这节课之后，你应该能真正掌握递归代码的复杂度分析。
## 实战一：分析快速排序的时间复杂度
在用递归树推导之前，我们先来回忆一下用递推公式的分析方法。你可以回想一下，当时，我们为什么说用递推公式来求解平均时间复杂度非常复杂？
快速排序在最好情况下，每次分区都能一分为二，这个时候用递推公式 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-9-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mfrac&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mfrac&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-42" style="width: 10.261em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.191em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1008.19em, 2.873em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-43"><span class="mi" id="MathJax-Span-44" style="font-family: MathJax_Math-italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.144em;"></span></span><span class="mo" id="MathJax-Span-45" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-46" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-47" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-48" style="font-family: MathJax_Main; padding-left: 0.285em;">=</span><span class="mn" id="MathJax-Span-49" style="font-family: MathJax_Main; padding-left: 0.285em;">2</span><span class="mi" id="MathJax-Span-50" style="font-family: MathJax_Math-italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.144em;"></span></span><span class="mo" id="MathJax-Span-51" style="font-family: MathJax_Main;">(</span><span class="mfrac" id="MathJax-Span-52"><span style="display: inline-block; position: relative; width: 0.567em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"><span style="position: absolute; clip: rect(3.532em, 1000.43em, 4.144em, -999.998em); top: -4.421em; left: 50%; margin-left: -0.233em;"><span class="mi" id="MathJax-Span-53" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(3.391em, 1000.33em, 4.144em, -999.998em); top: -3.621em; left: 50%; margin-left: -0.186em;"><span class="mn" id="MathJax-Span-54" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(0.896em, 1000.57em, 1.226em, -999.998em); top: -1.315em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.567em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span><span class="mo" id="MathJax-Span-55" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-56" style="font-family: MathJax_Main; padding-left: 0.238em;">+</span><span class="mi" id="MathJax-Span-57" style="font-family: MathJax_Math-italic; padding-left: 0.238em;">n</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.526em; border-left: 0px solid; width: 0px; height: 1.532em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mn>2</mn><mi>T</mi><mo stretchy="false">(</mo><mfrac><mi>n</mi><mn>2</mn></mfrac><mo stretchy="false">)</mo><mo>+</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-9"></script>，很容易就能推导出时间复杂度是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-10-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-58" style="width: 5.555em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.426em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1004.33em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-59"><span class="mi" id="MathJax-Span-60" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-61" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-62" style="font-family: MathJax_Math-italic;">n</span><span class="mi" id="MathJax-Span-63" style="font-family: MathJax_Main; padding-left: 0.191em;">log</span><span class="mo" id="MathJax-Span-64"></span><span class="mi" id="MathJax-Span-65" style="font-family: MathJax_Math-italic; padding-left: 0.191em;">n</span><span class="mo" id="MathJax-Span-66" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-10"></script>。但是，我们并不可能每次分区都这么幸运，正好一分为二。
我们假设平均情况下，每次分区之后，两个分区的大小比例为 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-11-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;:&lt;/mo&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-67" style="width: 2.355em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.885em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.508em, 1001.88em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-68"><span class="mn" id="MathJax-Span-69" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-70" style="font-family: MathJax_Main; padding-left: 0.285em;">:</span><span class="mi" id="MathJax-Span-71" style="font-family: MathJax_Math-italic; padding-left: 0.285em;">k</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn><mo>:</mo><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-11"></script>。当 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-12-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-72" style="width: 2.967em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.355em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.508em, 1002.31em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-73"><span class="mi" id="MathJax-Span-74" style="font-family: MathJax_Math-italic;">k</span><span class="mo" id="MathJax-Span-75" style="font-family: MathJax_Main; padding-left: 0.285em;">=</span><span class="mn" id="MathJax-Span-76" style="font-family: MathJax_Main; padding-left: 0.285em;">9</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi><mo>=</mo><mn>9</mn></math></span></span><script type="math/tex" id="MathJax-Element-12"></script> 时，如果用递推公式的方法来求解时间复杂度的话，递推公式就写成 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-13-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mfrac&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mn&gt;10&lt;/mn&gt;&lt;/mfrac&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/mrow&gt;&lt;mn&gt;10&lt;/mn&gt;&lt;/mfrac&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-77" style="width: 14.92em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.908em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.32em, 1011.91em, 2.873em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-78"><span class="mi" id="MathJax-Span-79" style="font-family: MathJax_Math-italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.144em;"></span></span><span class="mo" id="MathJax-Span-80" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-81" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-82" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-83" style="font-family: MathJax_Main; padding-left: 0.285em;">=</span><span class="mi" id="MathJax-Span-84" style="font-family: MathJax_Math-italic; padding-left: 0.285em;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.144em;"></span></span><span class="mo" id="MathJax-Span-85" style="font-family: MathJax_Main;">(</span><span class="mfrac" id="MathJax-Span-86"><span style="display: inline-block; position: relative; width: 0.849em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"><span style="position: absolute; clip: rect(3.532em, 1000.43em, 4.144em, -999.998em); top: -4.421em; left: 50%; margin-left: -0.233em;"><span class="mi" id="MathJax-Span-87" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(3.391em, 1000.66em, 4.144em, -999.998em); top: -3.621em; left: 50%; margin-left: -0.374em;"><span class="mn" id="MathJax-Span-88" style="font-size: 70.7%; font-family: MathJax_Main;">10</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(0.896em, 1000.85em, 1.226em, -999.998em); top: -1.315em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.849em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span><span class="mo" id="MathJax-Span-89" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-90" style="font-family: MathJax_Main; padding-left: 0.238em;">+</span><span class="mi" id="MathJax-Span-91" style="font-family: MathJax_Math-italic; padding-left: 0.238em;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.144em;"></span></span><span class="mo" id="MathJax-Span-92" style="font-family: MathJax_Main;">(</span><span class="mfrac" id="MathJax-Span-93"><span style="display: inline-block; position: relative; width: 0.896em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"><span style="position: absolute; clip: rect(3.391em, 1000.75em, 4.144em, -999.998em); top: -4.421em; left: 50%; margin-left: -0.374em;"><span class="mrow" id="MathJax-Span-94"><span class="mn" id="MathJax-Span-95" style="font-size: 70.7%; font-family: MathJax_Main;">9</span><span class="mi" id="MathJax-Span-96" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(3.391em, 1000.66em, 4.144em, -999.998em); top: -3.621em; left: 50%; margin-left: -0.374em;"><span class="mn" id="MathJax-Span-97" style="font-size: 70.7%; font-family: MathJax_Main;">10</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(0.896em, 1000.9em, 1.226em, -999.998em); top: -1.315em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.896em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span><span class="mo" id="MathJax-Span-98" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-99" style="font-family: MathJax_Main; padding-left: 0.238em;">+</span><span class="mi" id="MathJax-Span-100" style="font-family: MathJax_Math-italic; padding-left: 0.238em;">n</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.526em; border-left: 0px solid; width: 0px; height: 1.709em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo><mo>=</mo><mi>T</mi><mo stretchy="false">(</mo><mfrac><mi>n</mi><mn>10</mn></mfrac><mo stretchy="false">)</mo><mo>+</mo><mi>T</mi><mo stretchy="false">(</mo><mfrac><mrow><mn>9</mn><mi>n</mi></mrow><mn>10</mn></mfrac><mo stretchy="false">)</mo><mo>+</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-13"></script>。
这个公式可以推导出时间复杂度，但是推导过程非常复杂。那我们来看看，<strong>用递归树来分析快速排序的平均情况时间复杂度，是不是比较简单呢？</strong>
我们还是取 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-14-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-101" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1000.52em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-102"><span class="mi" id="MathJax-Span-103" style="font-family: MathJax_Math-italic;">k</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-14"></script> 等于 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-15-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-104" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1000.47em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-105"><span class="mn" id="MathJax-Span-106" style="font-family: MathJax_Main;">9</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>9</mn></math></span></span><script type="math/tex" id="MathJax-Element-15"></script>，也就是说，每次分区都很不平均，一个分区是另一个分区的 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-16-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-107" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1000.47em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-108"><span class="mn" id="MathJax-Span-109" style="font-family: MathJax_Main;">9</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>9</mn></math></span></span><script type="math/tex" id="MathJax-Element-16"></script> 倍。如果我们把递归分解的过程画成递归树，就是下面这个样子：
![图片](https://static001.geekbang.org/resource/image/44/43/44972a3531dae0b7a0ccc935bc13f243.jpg)
快速排序的过程中，每次分区都要遍历待分区区间的所有数据，所以，每一层分区操作所遍历的数据的个数之和就是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-17-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-110" style="width: 0.802em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.614em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.744em, 1000.61em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-111"><span class="mi" id="MathJax-Span-112" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.709em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-17"></script>。我们现在只要求出递归树的高度 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-18-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-113" style="width: 0.708em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.567em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1000.57em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-114"><span class="mi" id="MathJax-Span-115" style="font-family: MathJax_Math-italic;">h</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>h</mi></math></span></span><script type="math/tex" id="MathJax-Element-18"></script>，这个快排过程遍历的数据个数就是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-19-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-116" style="width: 2.732em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.167em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.508em, 1002.17em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-117"><span class="mi" id="MathJax-Span-118" style="font-family: MathJax_Math-italic;">h</span><span class="mo" id="MathJax-Span-119" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mi" id="MathJax-Span-120" style="font-family: MathJax_Math-italic; padding-left: 0.238em;">n</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>h</mi><mo>∗</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-19"></script> ，也就是说，时间复杂度就是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-20-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-121" style="width: 4.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.72em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1003.63em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-122"><span class="mi" id="MathJax-Span-123" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-124" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-125" style="font-family: MathJax_Math-italic;">h</span><span class="mo" id="MathJax-Span-126" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mi" id="MathJax-Span-127" style="font-family: MathJax_Math-italic; padding-left: 0.238em;">n</span><span class="mo" id="MathJax-Span-128" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>h</mi><mo>∗</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-20"></script>。
因为每次分区并不是均匀地一分为二，所以递归树并不是满二叉树。这样一个递归树的高度是多少呢？
我们知道，快速排序结束的条件就是待排序的小区间，大小为 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-21-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-129" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1000.43em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-130"><span class="mn" id="MathJax-Span-131" style="font-family: MathJax_Main;">1</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.944em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-21"></script>，也就是说叶子节点里的数据规模是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-22-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-132" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1000.43em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-133"><span class="mn" id="MathJax-Span-134" style="font-family: MathJax_Main;">1</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.944em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-22"></script>。从根节点 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-23-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-135" style="width: 0.802em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.614em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.744em, 1000.61em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-136"><span class="mi" id="MathJax-Span-137" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.709em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-23"></script> 到叶子节点 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-24-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-138" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1000.43em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-139"><span class="mn" id="MathJax-Span-140" style="font-family: MathJax_Main;">1</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.944em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-24"></script>，递归树中最短的一个路径每次都乘以 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-25-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mn&gt;10&lt;/mn&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-141" style="width: 1.414em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.132em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.32em, 1001.13em, 2.826em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-142"><span class="mfrac" id="MathJax-Span-143"><span style="display: inline-block; position: relative; width: 0.849em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"><span style="position: absolute; clip: rect(3.391em, 1000.28em, 4.144em, -999.998em); top: -4.374em; left: 50%; margin-left: -0.186em;"><span class="mn" id="MathJax-Span-144" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(3.391em, 1000.66em, 4.144em, -999.998em); top: -3.621em; left: 50%; margin-left: -0.374em;"><span class="mn" id="MathJax-Span-145" style="font-size: 70.7%; font-family: MathJax_Main;">10</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(0.896em, 1000.85em, 1.226em, -999.998em); top: -1.315em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.849em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.526em; border-left: 0px solid; width: 0px; height: 1.709em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mn>1</mn><mn>10</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-25"></script>，最长的一个路径每次都乘以 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-26-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mfrac&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;mn&gt;10&lt;/mn&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-146" style="width: 1.414em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.132em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.273em, 1001.13em, 2.826em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-147"><span class="mfrac" id="MathJax-Span-148"><span style="display: inline-block; position: relative; width: 0.849em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"><span style="position: absolute; clip: rect(3.391em, 1000.33em, 4.144em, -999.998em); top: -4.421em; left: 50%; margin-left: -0.186em;"><span class="mn" id="MathJax-Span-149" style="font-size: 70.7%; font-family: MathJax_Main;">9</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(3.391em, 1000.66em, 4.144em, -999.998em); top: -3.621em; left: 50%; margin-left: -0.374em;"><span class="mn" id="MathJax-Span-150" style="font-size: 70.7%; font-family: MathJax_Main;">10</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(0.896em, 1000.85em, 1.226em, -999.998em); top: -1.315em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.849em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.526em; border-left: 0px solid; width: 0px; height: 1.709em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mn>9</mn><mn>10</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-26"></script>。通过计算，我们可以得到，从根节点到叶子节点的最短路径是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-27-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;msub&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mrow class=&#34;MJX-TeXAtom-ORD&#34;&gt;&lt;mn&gt;10&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-151" style="width: 3.626em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.873em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1002.87em, 2.685em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-152"><span class="msubsup" id="MathJax-Span-153"><span style="display: inline-block; position: relative; width: 2.073em; height: 0px;"><span style="position: absolute; clip: rect(3.155em, 1001.27em, 4.332em, -999.998em); top: -3.998em; left: 0em;"><span class="mi" id="MathJax-Span-154" style="font-family: MathJax_Main;">log</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; top: -3.762em; left: 1.273em;"><span class="texatom" id="MathJax-Span-155"><span class="mrow" id="MathJax-Span-156"><span class="mn" id="MathJax-Span-157" style="font-size: 70.7%; font-family: MathJax_Main;">10</span></span></span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span></span></span><span class="mo" id="MathJax-Span-158"></span><span class="mi" id="MathJax-Span-159" style="font-family: MathJax_Math-italic; padding-left: 0.191em;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.297em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>log</mi><mrow class="MJX-TeXAtom-ORD"><mn>10</mn></mrow></msub><mo>⁡</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-27"></script>，最长的路径是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-28-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;msub&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mrow class=&#34;MJX-TeXAtom-ORD&#34;&gt;&lt;mfrac&gt;&lt;mn&gt;10&lt;/mn&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-160" style="width: 3.767em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.014em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1003.01em, 3.108em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-161"><span class="msubsup" id="MathJax-Span-162"><span style="display: inline-block; position: relative; width: 2.214em; height: 0px;"><span style="position: absolute; clip: rect(3.155em, 1001.27em, 4.332em, -999.998em); top: -3.998em; left: 0em;"><span class="mi" id="MathJax-Span-163" style="font-family: MathJax_Main;">log</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; top: -3.668em; left: 1.273em;"><span class="texatom" id="MathJax-Span-164"><span class="mrow" id="MathJax-Span-165"><span class="mfrac" id="MathJax-Span-166"><span style="display: inline-block; position: relative; width: 0.614em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"><span style="position: absolute; clip: rect(3.532em, 1000.47em, 4.144em, -999.998em); top: -4.327em; left: 50%; margin-left: -0.233em;"><span class="mn" id="MathJax-Span-167" style="font-size: 50%; font-family: MathJax_Main;">10</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(3.532em, 1000.24em, 4.144em, -999.998em); top: -3.715em; left: 50%; margin-left: -0.139em;"><span class="mn" id="MathJax-Span-168" style="font-size: 50%; font-family: MathJax_Main;">9</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(0.896em, 1000.61em, 1.226em, -999.998em); top: -1.221em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.614em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span></span></span><span class="mo" id="MathJax-Span-169"></span><span class="mi" id="MathJax-Span-170" style="font-family: MathJax_Math-italic; padding-left: 0.191em;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.879em; border-left: 0px solid; width: 0px; height: 1.768em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>log</mi><mrow class="MJX-TeXAtom-ORD"><mfrac><mn>10</mn><mn>9</mn></mfrac></mrow></msub><mo>⁡</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-28"></script>。
![图片](https://static001.geekbang.org/resource/image/7c/ed/7cea8607f0d92a901f3152341830d6ed.jpg)
所以，遍历数据的个数总和就介于 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-29-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mrow class=&#34;MJX-TeXAtom-ORD&#34;&gt;&lt;mn&gt;10&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-171" style="width: 4.614em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.673em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1003.67em, 2.685em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-172"><span class="mi" id="MathJax-Span-173" style="font-family: MathJax_Math-italic;">n</span><span class="msubsup" id="MathJax-Span-174" style="padding-left: 0.191em;"><span style="display: inline-block; position: relative; width: 2.073em; height: 0px;"><span style="position: absolute; clip: rect(3.155em, 1001.27em, 4.332em, -999.998em); top: -3.998em; left: 0em;"><span class="mi" id="MathJax-Span-175" style="font-family: MathJax_Main;">log</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; top: -3.762em; left: 1.273em;"><span class="texatom" id="MathJax-Span-176"><span class="mrow" id="MathJax-Span-177"><span class="mn" id="MathJax-Span-178" style="font-size: 70.7%; font-family: MathJax_Main;">10</span></span></span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span></span></span><span class="mo" id="MathJax-Span-179"></span><span class="mi" id="MathJax-Span-180" style="font-family: MathJax_Math-italic; padding-left: 0.191em;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.297em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><msub><mi>log</mi><mrow class="MJX-TeXAtom-ORD"><mn>10</mn></mrow></msub><mo>⁡</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-29"></script> 和 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-30-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mrow class=&#34;MJX-TeXAtom-ORD&#34;&gt;&lt;mfrac&gt;&lt;mn&gt;10&lt;/mn&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-181" style="width: 4.802em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.814em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1003.81em, 3.108em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-182"><span class="mi" id="MathJax-Span-183" style="font-family: MathJax_Math-italic;">n</span><span class="msubsup" id="MathJax-Span-184" style="padding-left: 0.191em;"><span style="display: inline-block; position: relative; width: 2.214em; height: 0px;"><span style="position: absolute; clip: rect(3.155em, 1001.27em, 4.332em, -999.998em); top: -3.998em; left: 0em;"><span class="mi" id="MathJax-Span-185" style="font-family: MathJax_Main;">log</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; top: -3.668em; left: 1.273em;"><span class="texatom" id="MathJax-Span-186"><span class="mrow" id="MathJax-Span-187"><span class="mfrac" id="MathJax-Span-188"><span style="display: inline-block; position: relative; width: 0.614em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"><span style="position: absolute; clip: rect(3.532em, 1000.47em, 4.144em, -999.998em); top: -4.327em; left: 50%; margin-left: -0.233em;"><span class="mn" id="MathJax-Span-189" style="font-size: 50%; font-family: MathJax_Main;">10</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(3.532em, 1000.24em, 4.144em, -999.998em); top: -3.715em; left: 50%; margin-left: -0.139em;"><span class="mn" id="MathJax-Span-190" style="font-size: 50%; font-family: MathJax_Main;">9</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(0.896em, 1000.61em, 1.226em, -999.998em); top: -1.221em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.614em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span></span></span><span class="mo" id="MathJax-Span-191"></span><span class="mi" id="MathJax-Span-192" style="font-family: MathJax_Math-italic; padding-left: 0.191em;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.879em; border-left: 0px solid; width: 0px; height: 1.768em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><msub><mi>log</mi><mrow class="MJX-TeXAtom-ORD"><mfrac><mn>10</mn><mn>9</mn></mfrac></mrow></msub><mo>⁡</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-30"></script> 之间。根据复杂度的大 O 表示法，对数复杂度的底数不管是多少，我们统一写成 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-31-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-193" style="width: 2.591em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.073em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.508em, 1002.07em, 2.685em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-194"><span class="mi" id="MathJax-Span-195" style="font-family: MathJax_Main;">log</span><span class="mo" id="MathJax-Span-196"></span><span class="mi" id="MathJax-Span-197" style="font-family: MathJax_Math-italic; padding-left: 0.191em;">n</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.291em; border-left: 0px solid; width: 0px; height: 1.238em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>log</mi><mo>⁡</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-31"></script>，所以，当分区大小比例是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-32-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;:&lt;/mo&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-198" style="width: 2.308em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.838em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1001.79em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-199"><span class="mn" id="MathJax-Span-200" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-201" style="font-family: MathJax_Main; padding-left: 0.285em;">:</span><span class="mn" id="MathJax-Span-202" style="font-family: MathJax_Main; padding-left: 0.285em;">9</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn><mo>:</mo><mn>9</mn></math></span></span><script type="math/tex" id="MathJax-Element-32"></script> 时，快速排序的时间复杂度仍然是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-33-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-203" style="width: 5.555em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.426em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1004.33em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-204"><span class="mi" id="MathJax-Span-205" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-206" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-207" style="font-family: MathJax_Math-italic;">n</span><span class="mi" id="MathJax-Span-208" style="font-family: MathJax_Main; padding-left: 0.191em;">log</span><span class="mo" id="MathJax-Span-209"></span><span class="mi" id="MathJax-Span-210" style="font-family: MathJax_Math-italic; padding-left: 0.191em;">n</span><span class="mo" id="MathJax-Span-211" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-33"></script>。
刚刚我们假设 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-34-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-212" style="width: 2.967em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.355em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.508em, 1002.31em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-213"><span class="mi" id="MathJax-Span-214" style="font-family: MathJax_Math-italic;">k</span><span class="mo" id="MathJax-Span-215" style="font-family: MathJax_Main; padding-left: 0.285em;">=</span><span class="mn" id="MathJax-Span-216" style="font-family: MathJax_Main; padding-left: 0.285em;">9</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi><mo>=</mo><mn>9</mn></math></span></span><script type="math/tex" id="MathJax-Element-34"></script>，那如果 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-35-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;99&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-217" style="width: 3.626em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.873em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.508em, 1002.83em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-218"><span class="mi" id="MathJax-Span-219" style="font-family: MathJax_Math-italic;">k</span><span class="mo" id="MathJax-Span-220" style="font-family: MathJax_Main; padding-left: 0.285em;">=</span><span class="mn" id="MathJax-Span-221" style="font-family: MathJax_Main; padding-left: 0.285em;">99</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi><mo>=</mo><mn>99</mn></math></span></span><script type="math/tex" id="MathJax-Element-35"></script>，也就是说，每次分区极其不平均，两个区间大小是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-36-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;:&lt;/mo&gt;&lt;mn&gt;99&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-222" style="width: 2.967em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.355em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1002.31em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-223"><span class="mn" id="MathJax-Span-224" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-225" style="font-family: MathJax_Main; padding-left: 0.285em;">:</span><span class="mn" id="MathJax-Span-226" style="font-family: MathJax_Main; padding-left: 0.285em;">99</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn><mo>:</mo><mn>99</mn></math></span></span><script type="math/tex" id="MathJax-Element-36"></script>，这个时候的时间复杂度是多少呢？
我们可以类比上面 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-37-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-227" style="width: 2.967em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.355em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.508em, 1002.31em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-228"><span class="mi" id="MathJax-Span-229" style="font-family: MathJax_Math-italic;">k</span><span class="mo" id="MathJax-Span-230" style="font-family: MathJax_Main; padding-left: 0.285em;">=</span><span class="mn" id="MathJax-Span-231" style="font-family: MathJax_Main; padding-left: 0.285em;">9</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi><mo>=</mo><mn>9</mn></math></span></span><script type="math/tex" id="MathJax-Element-37"></script> 的分析过程。当 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-38-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;99&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-232" style="width: 3.626em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.873em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.508em, 1002.83em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-233"><span class="mi" id="MathJax-Span-234" style="font-family: MathJax_Math-italic;">k</span><span class="mo" id="MathJax-Span-235" style="font-family: MathJax_Main; padding-left: 0.285em;">=</span><span class="mn" id="MathJax-Span-236" style="font-family: MathJax_Main; padding-left: 0.285em;">99</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi><mo>=</mo><mn>99</mn></math></span></span><script type="math/tex" id="MathJax-Element-38"></script> 的时候，树的最短路径就是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-39-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;msub&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mrow class=&#34;MJX-TeXAtom-ORD&#34;&gt;&lt;mn&gt;100&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-237" style="width: 4.002em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.202em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1003.2em, 2.685em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-238"><span class="msubsup" id="MathJax-Span-239"><span style="display: inline-block; position: relative; width: 2.402em; height: 0px;"><span style="position: absolute; clip: rect(3.155em, 1001.27em, 4.332em, -999.998em); top: -3.998em; left: 0em;"><span class="mi" id="MathJax-Span-240" style="font-family: MathJax_Main;">log</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; top: -3.762em; left: 1.273em;"><span class="texatom" id="MathJax-Span-241"><span class="mrow" id="MathJax-Span-242"><span class="mn" id="MathJax-Span-243" style="font-size: 70.7%; font-family: MathJax_Main;">100</span></span></span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span></span></span><span class="mo" id="MathJax-Span-244"></span><span class="mi" id="MathJax-Span-245" style="font-family: MathJax_Math-italic; padding-left: 0.191em;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.297em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>log</mi><mrow class="MJX-TeXAtom-ORD"><mn>100</mn></mrow></msub><mo>⁡</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-39"></script>，最长路径是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-40-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;msub&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mrow class=&#34;MJX-TeXAtom-ORD&#34;&gt;&lt;mfrac&gt;&lt;mn&gt;100&lt;/mn&gt;&lt;mn&gt;99&lt;/mn&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-246" style="width: 4.096em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.249em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1003.25em, 3.108em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-247"><span class="msubsup" id="MathJax-Span-248"><span style="display: inline-block; position: relative; width: 2.449em; height: 0px;"><span style="position: absolute; clip: rect(3.155em, 1001.27em, 4.332em, -999.998em); top: -3.998em; left: 0em;"><span class="mi" id="MathJax-Span-249" style="font-family: MathJax_Main;">log</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; top: -3.668em; left: 1.273em;"><span class="texatom" id="MathJax-Span-250"><span class="mrow" id="MathJax-Span-251"><span class="mfrac" id="MathJax-Span-252"><span style="display: inline-block; position: relative; width: 0.849em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"><span style="position: absolute; clip: rect(3.532em, 1000.75em, 4.144em, -999.998em); top: -4.327em; left: 50%; margin-left: -0.374em;"><span class="mn" id="MathJax-Span-253" style="font-size: 50%; font-family: MathJax_Main;">100</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(3.532em, 1000.47em, 4.144em, -999.998em); top: -3.715em; left: 50%; margin-left: -0.233em;"><span class="mn" id="MathJax-Span-254" style="font-size: 50%; font-family: MathJax_Main;">99</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(0.896em, 1000.85em, 1.226em, -999.998em); top: -1.221em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.849em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span></span></span><span class="mo" id="MathJax-Span-255"></span><span class="mi" id="MathJax-Span-256" style="font-family: MathJax_Math-italic; padding-left: 0.191em;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.879em; border-left: 0px solid; width: 0px; height: 1.768em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>log</mi><mrow class="MJX-TeXAtom-ORD"><mfrac><mn>100</mn><mn>99</mn></mfrac></mrow></msub><mo>⁡</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-40"></script>，所以总遍历数据个数介于 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-41-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mrow class=&#34;MJX-TeXAtom-ORD&#34;&gt;&lt;mn&gt;100&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-257" style="width: 5.038em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.002em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1004em, 2.685em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-258"><span class="mi" id="MathJax-Span-259" style="font-family: MathJax_Math-italic;">n</span><span class="msubsup" id="MathJax-Span-260" style="padding-left: 0.191em;"><span style="display: inline-block; position: relative; width: 2.402em; height: 0px;"><span style="position: absolute; clip: rect(3.155em, 1001.27em, 4.332em, -999.998em); top: -3.998em; left: 0em;"><span class="mi" id="MathJax-Span-261" style="font-family: MathJax_Main;">log</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; top: -3.762em; left: 1.273em;"><span class="texatom" id="MathJax-Span-262"><span class="mrow" id="MathJax-Span-263"><span class="mn" id="MathJax-Span-264" style="font-size: 70.7%; font-family: MathJax_Main;">100</span></span></span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span></span></span><span class="mo" id="MathJax-Span-265"></span><span class="mi" id="MathJax-Span-266" style="font-family: MathJax_Math-italic; padding-left: 0.191em;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.297em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><msub><mi>log</mi><mrow class="MJX-TeXAtom-ORD"><mn>100</mn></mrow></msub><mo>⁡</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-41"></script> 和 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-42-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mrow class=&#34;MJX-TeXAtom-ORD&#34;&gt;&lt;mfrac&gt;&lt;mn&gt;100&lt;/mn&gt;&lt;mn&gt;99&lt;/mn&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-267" style="width: 5.085em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.049em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1004.05em, 3.108em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-268"><span class="mi" id="MathJax-Span-269" style="font-family: MathJax_Math-italic;">n</span><span class="msubsup" id="MathJax-Span-270" style="padding-left: 0.191em;"><span style="display: inline-block; position: relative; width: 2.449em; height: 0px;"><span style="position: absolute; clip: rect(3.155em, 1001.27em, 4.332em, -999.998em); top: -3.998em; left: 0em;"><span class="mi" id="MathJax-Span-271" style="font-family: MathJax_Main;">log</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; top: -3.668em; left: 1.273em;"><span class="texatom" id="MathJax-Span-272"><span class="mrow" id="MathJax-Span-273"><span class="mfrac" id="MathJax-Span-274"><span style="display: inline-block; position: relative; width: 0.849em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"><span style="position: absolute; clip: rect(3.532em, 1000.75em, 4.144em, -999.998em); top: -4.327em; left: 50%; margin-left: -0.374em;"><span class="mn" id="MathJax-Span-275" style="font-size: 50%; font-family: MathJax_Main;">100</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(3.532em, 1000.47em, 4.144em, -999.998em); top: -3.715em; left: 50%; margin-left: -0.233em;"><span class="mn" id="MathJax-Span-276" style="font-size: 50%; font-family: MathJax_Main;">99</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(0.896em, 1000.85em, 1.226em, -999.998em); top: -1.221em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.849em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span></span></span><span class="mo" id="MathJax-Span-277"></span><span class="mi" id="MathJax-Span-278" style="font-family: MathJax_Math-italic; padding-left: 0.191em;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.879em; border-left: 0px solid; width: 0px; height: 1.768em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><msub><mi>log</mi><mrow class="MJX-TeXAtom-ORD"><mfrac><mn>100</mn><mn>99</mn></mfrac></mrow></msub><mo>⁡</mo><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-42"></script> 之间。尽管底数变了，但是时间复杂度也仍然是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-43-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-279" style="width: 5.555em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.426em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1004.33em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-280"><span class="mi" id="MathJax-Span-281" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-282" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-283" style="font-family: MathJax_Math-italic;">n</span><span class="mi" id="MathJax-Span-284" style="font-family: MathJax_Main; padding-left: 0.191em;">log</span><span class="mo" id="MathJax-Span-285"></span><span class="mi" id="MathJax-Span-286" style="font-family: MathJax_Math-italic; padding-left: 0.191em;">n</span><span class="mo" id="MathJax-Span-287" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-43"></script>。
也就是说，对于 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-44-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-288" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1000.52em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-289"><span class="mi" id="MathJax-Span-290" style="font-family: MathJax_Math-italic;">k</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-44"></script> 等于 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-45-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;9&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-291" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1000.47em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-292"><span class="mn" id="MathJax-Span-293" style="font-family: MathJax_Main;">9</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>9</mn></math></span></span><script type="math/tex" id="MathJax-Element-45"></script>，<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-46-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;99&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-294" style="width: 1.32em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.038em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1000.99em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-295"><span class="mn" id="MathJax-Span-296" style="font-family: MathJax_Main;">99</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>99</mn></math></span></span><script type="math/tex" id="MathJax-Element-46"></script>，甚至是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-47-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;999&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-297" style="width: 1.885em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.508em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1001.46em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-298"><span class="mn" id="MathJax-Span-299" style="font-family: MathJax_Main;">999</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>999</mn></math></span></span><script type="math/tex" id="MathJax-Element-47"></script>，<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-48-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;9999&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-300" style="width: 2.544em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.026em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1001.98em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-301"><span class="mn" id="MathJax-Span-302" style="font-family: MathJax_Main;">9999</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>9999</mn></math></span></span><script type="math/tex" id="MathJax-Element-48"></script>……，只要 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-49-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-303" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1000.52em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-304"><span class="mi" id="MathJax-Span-305" style="font-family: MathJax_Math-italic;">k</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-49"></script> 的值不随 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-50-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-306" style="width: 0.802em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.614em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.744em, 1000.61em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-307"><span class="mi" id="MathJax-Span-308" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.709em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-50"></script> 变化，是一个事先确定的常量，那快排的时间复杂度就是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-51-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-309" style="width: 5.555em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.426em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1004.33em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-310"><span class="mi" id="MathJax-Span-311" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-312" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-313" style="font-family: MathJax_Math-italic;">n</span><span class="mi" id="MathJax-Span-314" style="font-family: MathJax_Main; padding-left: 0.191em;">log</span><span class="mo" id="MathJax-Span-315"></span><span class="mi" id="MathJax-Span-316" style="font-family: MathJax_Math-italic; padding-left: 0.191em;">n</span><span class="mo" id="MathJax-Span-317" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-51"></script>。所以，从概率论的角度来说，快排的平均时间复杂度就是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-52-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;⁡&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-318" style="width: 5.555em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.426em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1004.33em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-319"><span class="mi" id="MathJax-Span-320" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-321" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-322" style="font-family: MathJax_Math-italic;">n</span><span class="mi" id="MathJax-Span-323" style="font-family: MathJax_Main; padding-left: 0.191em;">log</span><span class="mo" id="MathJax-Span-324"></span><span class="mi" id="MathJax-Span-325" style="font-family: MathJax_Math-italic; padding-left: 0.191em;">n</span><span class="mo" id="MathJax-Span-326" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-52"></script>。
## 实战二：分析斐波那契数列的时间复杂度
在递归那一节中，我们举了一个跨台阶的例子，你还记得吗？那个例子实际上就是一个斐波那契数列。为了方便你回忆，我把它的代码实现贴在这里。
```java 
int f(int n) {
  if (n == 1) return 1;
  if (n == 2) return 2;
  return f(n-1) + f(n-2);
}

 ``` 
这样一段代码的时间复杂度是多少呢？你可以先试着分析一下，然后再来看，我是怎么利用递归树来分析的。
我们先把上面的递归代码画成递归树，就是下面这个样子：
![图片](https://static001.geekbang.org/resource/image/9c/ce/9ccbce1a70c7e2def52701dcf176a4ce.jpg)
这棵递归树的高度是多少呢？
<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-53-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-327" style="width: 2.449em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.932em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1001.84em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-328"><span class="mi" id="MathJax-Span-329" style="font-family: MathJax_Math-italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.049em;"></span></span><span class="mo" id="MathJax-Span-330" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-331" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-332" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-53"></script> 分解为 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-54-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-333" style="width: 4.614em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.673em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1003.58em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-334"><span class="mi" id="MathJax-Span-335" style="font-family: MathJax_Math-italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.049em;"></span></span><span class="mo" id="MathJax-Span-336" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-337" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-338" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mn" id="MathJax-Span-339" style="font-family: MathJax_Main; padding-left: 0.238em;">1</span><span class="mo" id="MathJax-Span-340" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-54"></script> 和 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-55-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-341" style="width: 4.614em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.673em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1003.58em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-342"><span class="mi" id="MathJax-Span-343" style="font-family: MathJax_Math-italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.049em;"></span></span><span class="mo" id="MathJax-Span-344" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-345" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-346" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mn" id="MathJax-Span-347" style="font-family: MathJax_Main; padding-left: 0.238em;">2</span><span class="mo" id="MathJax-Span-348" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-55"></script>，每次数据规模都是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-56-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-349" style="width: 1.602em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.273em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1001.18em, 2.591em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-350"><span class="mo" id="MathJax-Span-351" style="font-family: MathJax_Main;">−</span><span class="mn" id="MathJax-Span-352" style="font-family: MathJax_Main;">1</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.174em; border-left: 0px solid; width: 0px; height: 1.062em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>−</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-56"></script> 或者 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-57-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-353" style="width: 1.602em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.273em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1001.23em, 2.591em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-354"><span class="mo" id="MathJax-Span-355" style="font-family: MathJax_Main;">−</span><span class="mn" id="MathJax-Span-356" style="font-family: MathJax_Main;">2</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.174em; border-left: 0px solid; width: 0px; height: 1.062em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>−</mo><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-57"></script>，叶子节点的数据规模是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-58-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-357" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1000.43em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-358"><span class="mn" id="MathJax-Span-359" style="font-family: MathJax_Main;">1</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.944em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-58"></script> 或者 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-59-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-360" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1000.47em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-361"><span class="mn" id="MathJax-Span-362" style="font-family: MathJax_Main;">2</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.944em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-59"></script>。所以，从根节点走到叶子节点，每条路径是长短不一的。如果每次都是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-60-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-363" style="width: 1.602em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.273em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1001.18em, 2.591em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-364"><span class="mo" id="MathJax-Span-365" style="font-family: MathJax_Main;">−</span><span class="mn" id="MathJax-Span-366" style="font-family: MathJax_Main;">1</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.174em; border-left: 0px solid; width: 0px; height: 1.062em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>−</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-60"></script>，那最长路径大约就是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-61-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-367" style="width: 0.802em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.614em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.744em, 1000.61em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-368"><span class="mi" id="MathJax-Span-369" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.709em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-61"></script>；如果每次都是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-62-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-370" style="width: 1.602em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.273em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1001.23em, 2.591em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-371"><span class="mo" id="MathJax-Span-372" style="font-family: MathJax_Main;">−</span><span class="mn" id="MathJax-Span-373" style="font-family: MathJax_Main;">2</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.174em; border-left: 0px solid; width: 0px; height: 1.062em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>−</mo><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-62"></script>，那最短路径大约就是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-63-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mfrac&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-374" style="width: 1.085em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.849em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1000.85em, 2.826em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-375"><span class="mfrac" id="MathJax-Span-376"><span style="display: inline-block; position: relative; width: 0.567em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"><span style="position: absolute; clip: rect(3.532em, 1000.43em, 4.144em, -999.998em); top: -4.421em; left: 50%; margin-left: -0.233em;"><span class="mi" id="MathJax-Span-377" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(3.391em, 1000.33em, 4.144em, -999.998em); top: -3.621em; left: 50%; margin-left: -0.186em;"><span class="mn" id="MathJax-Span-378" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(0.896em, 1000.57em, 1.226em, -999.998em); top: -1.315em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.567em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.526em; border-left: 0px solid; width: 0px; height: 1.474em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mi>n</mi><mn>2</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-63"></script>。
每次分解之后的合并操作只需要一次加法运算，我们把这次加法运算的时间消耗记作 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-64-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-379" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1000.43em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-380"><span class="mn" id="MathJax-Span-381" style="font-family: MathJax_Main;">1</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.944em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-64"></script>。所以，从上往下，第一层的总时间消耗是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-65-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-382" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1000.43em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-383"><span class="mn" id="MathJax-Span-384" style="font-family: MathJax_Main;">1</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.944em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-65"></script>，第二层的总时间消耗是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-66-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-385" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1000.47em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-386"><span class="mn" id="MathJax-Span-387" style="font-family: MathJax_Main;">2</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.944em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-66"></script>，第三层的总时间消耗就是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-67-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;msup&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mrow class=&#34;MJX-TeXAtom-ORD&#34;&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-388" style="width: 1.179em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.944em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.32em, 1000.94em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-389"><span class="msubsup" id="MathJax-Span-390"><span style="display: inline-block; position: relative; width: 0.944em; height: 0px;"><span style="position: absolute; clip: rect(3.202em, 1000.47em, 4.144em, -999.998em); top: -3.998em; left: 0em;"><span class="mn" id="MathJax-Span-391" style="font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; top: -4.374em; left: 0.52em;"><span class="texatom" id="MathJax-Span-392"><span class="mrow" id="MathJax-Span-393"><span class="mn" id="MathJax-Span-394" style="font-size: 70.7%; font-family: MathJax_Main;">2</span></span></span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.179em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-67"></script>。依次类推，第 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-68-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-395" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1000.52em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-396"><span class="mi" id="MathJax-Span-397" style="font-family: MathJax_Math-italic;">k</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-68"></script> 层的时间消耗就是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-69-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;msup&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mrow class=&#34;MJX-TeXAtom-ORD&#34;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-398" style="width: 2.308em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.838em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.273em, 1001.84em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-399"><span class="msubsup" id="MathJax-Span-400"><span style="display: inline-block; position: relative; width: 1.838em; height: 0px;"><span style="position: absolute; clip: rect(3.202em, 1000.47em, 4.144em, -999.998em); top: -3.998em; left: 0em;"><span class="mn" id="MathJax-Span-401" style="font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; top: -4.374em; left: 0.52em;"><span class="texatom" id="MathJax-Span-402"><span class="mrow" id="MathJax-Span-403"><span class="mi" id="MathJax-Span-404" style="font-size: 70.7%; font-family: MathJax_Math-italic;">k</span><span class="mo" id="MathJax-Span-405" style="font-size: 70.7%; font-family: MathJax_Main;">−</span><span class="mn" id="MathJax-Span-406" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.238em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mi>k</mi><mo>−</mo><mn>1</mn></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-69"></script>，那整个算法的总的时间消耗就是每一层时间消耗之和。
如果路径长度都为 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-70-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-407" style="width: 0.802em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.614em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.744em, 1000.61em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-408"><span class="mi" id="MathJax-Span-409" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.709em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-70"></script>，那这个总和就是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-71-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;msup&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mrow class=&#34;MJX-TeXAtom-ORD&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-410" style="width: 3.438em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.732em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.508em, 1002.64em, 2.591em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-411"><span class="msubsup" id="MathJax-Span-412"><span style="display: inline-block; position: relative; width: 0.991em; height: 0px;"><span style="position: absolute; clip: rect(3.202em, 1000.47em, 4.144em, -999.998em); top: -3.998em; left: 0em;"><span class="mn" id="MathJax-Span-413" style="font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; top: -4.374em; left: 0.52em;"><span class="texatom" id="MathJax-Span-414"><span class="mrow" id="MathJax-Span-415"><span class="mi" id="MathJax-Span-416" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span></span></span><span class="mo" id="MathJax-Span-417" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mn" id="MathJax-Span-418" style="font-family: MathJax_Main; padding-left: 0.238em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.174em; border-left: 0px solid; width: 0px; height: 1.121em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mi>n</mi></mrow></msup><mo>−</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-71"></script>。
![图片](https://static001.geekbang.org/resource/image/86/1f/86d301fc5fa3088383fa5b45f01e4d1f.jpg)
如果路径长度都是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-72-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mfrac&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-419" style="width: 1.085em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.849em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1000.85em, 2.826em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-420"><span class="mfrac" id="MathJax-Span-421"><span style="display: inline-block; position: relative; width: 0.567em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"><span style="position: absolute; clip: rect(3.532em, 1000.43em, 4.144em, -999.998em); top: -4.421em; left: 50%; margin-left: -0.233em;"><span class="mi" id="MathJax-Span-422" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(3.391em, 1000.33em, 4.144em, -999.998em); top: -3.621em; left: 50%; margin-left: -0.186em;"><span class="mn" id="MathJax-Span-423" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(0.896em, 1000.57em, 1.226em, -999.998em); top: -1.315em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.567em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.526em; border-left: 0px solid; width: 0px; height: 1.474em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mfrac><mi>n</mi><mn>2</mn></mfrac></math></span></span><script type="math/tex" id="MathJax-Element-72"></script> ，那整个算法的总的时间消耗就是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-73-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;msup&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mrow class=&#34;MJX-TeXAtom-ORD&#34;&gt;&lt;mfrac&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-424" style="width: 3.72em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.967em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.273em, 1002.87em, 2.591em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-425"><span class="msubsup" id="MathJax-Span-426"><span style="display: inline-block; position: relative; width: 1.226em; height: 0px;"><span style="position: absolute; clip: rect(3.202em, 1000.47em, 4.144em, -999.998em); top: -3.998em; left: 0em;"><span class="mn" id="MathJax-Span-427" style="font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; top: -4.421em; left: 0.52em;"><span class="texatom" id="MathJax-Span-428"><span class="mrow" id="MathJax-Span-429"><span class="mfrac" id="MathJax-Span-430"><span style="display: inline-block; position: relative; width: 0.426em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"><span style="position: absolute; clip: rect(3.626em, 1000.28em, 4.144em, -999.998em); top: -4.327em; left: 50%; margin-left: -0.139em;"><span class="mi" id="MathJax-Span-431" style="font-size: 50%; font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(3.532em, 1000.24em, 4.144em, -999.998em); top: -3.715em; left: 50%; margin-left: -0.139em;"><span class="mn" id="MathJax-Span-432" style="font-size: 50%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(0.896em, 1000.43em, 1.226em, -999.998em); top: -1.221em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.426em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span></span></span><span class="mo" id="MathJax-Span-433" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mn" id="MathJax-Span-434" style="font-family: MathJax_Main; padding-left: 0.238em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.174em; border-left: 0px solid; width: 0px; height: 1.415em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mfrac><mi>n</mi><mn>2</mn></mfrac></mrow></msup><mo>−</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-73"></script>。
![图片](https://static001.geekbang.org/resource/image/55/d4/55fcb1570dfa09e457cdb93ba58777d4.jpg)
所以，这个算法的时间复杂度就介于 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-74-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mrow class=&#34;MJX-TeXAtom-ORD&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-435" style="width: 3.202em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.544em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1002.45em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-436"><span class="mi" id="MathJax-Span-437" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-438" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-439"><span style="display: inline-block; position: relative; width: 0.991em; height: 0px;"><span style="position: absolute; clip: rect(3.202em, 1000.47em, 4.144em, -999.998em); top: -3.998em; left: 0em;"><span class="mn" id="MathJax-Span-440" style="font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; top: -4.374em; left: 0.52em;"><span class="texatom" id="MathJax-Span-441"><span class="mrow" id="MathJax-Span-442"><span class="mi" id="MathJax-Span-443" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span></span></span><span class="mo" id="MathJax-Span-444" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mi>n</mi></mrow></msup><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-74"></script> 和 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-75-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mrow class=&#34;MJX-TeXAtom-ORD&#34;&gt;&lt;mfrac&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-445" style="width: 3.485em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.779em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.273em, 1002.68em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-446"><span class="mi" id="MathJax-Span-447" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-448" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-449"><span style="display: inline-block; position: relative; width: 1.226em; height: 0px;"><span style="position: absolute; clip: rect(3.202em, 1000.47em, 4.144em, -999.998em); top: -3.998em; left: 0em;"><span class="mn" id="MathJax-Span-450" style="font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; top: -4.421em; left: 0.52em;"><span class="texatom" id="MathJax-Span-451"><span class="mrow" id="MathJax-Span-452"><span class="mfrac" id="MathJax-Span-453"><span style="display: inline-block; position: relative; width: 0.426em; height: 0px; margin-right: 0.144em; margin-left: 0.144em;"><span style="position: absolute; clip: rect(3.626em, 1000.28em, 4.144em, -999.998em); top: -4.327em; left: 50%; margin-left: -0.139em;"><span class="mi" id="MathJax-Span-454" style="font-size: 50%; font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(3.532em, 1000.24em, 4.144em, -999.998em); top: -3.715em; left: 50%; margin-left: -0.139em;"><span class="mn" id="MathJax-Span-455" style="font-size: 50%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span><span style="position: absolute; clip: rect(0.896em, 1000.43em, 1.226em, -999.998em); top: -1.221em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.426em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.085em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.002em;"></span></span></span></span><span class="mo" id="MathJax-Span-456" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.65em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mfrac><mi>n</mi><mn>2</mn></mfrac></mrow></msup><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-75"></script> 之间。虽然这样得到的结果还不够精确，只是一个范围，但是我们也基本上知道了上面算法的时间复杂度是指数级的，非常高。
## 实战三：分析全排列的时间复杂度
前面两个复杂度分析都比较简单，我们再来看个稍微复杂的。
我们在高中的时候都学过排列组合。“如何把 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-76-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-457" style="width: 0.802em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.614em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.744em, 1000.61em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-458"><span class="mi" id="MathJax-Span-459" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.709em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-76"></script> 个数据的所有排列都找出来”，这就是全排列的问题。
我来举个例子。比如，<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-77-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mrow class=&#34;MJX-TeXAtom-ORD&#34;&gt;&lt;mo&gt;，&lt;/mo&gt;&lt;/mrow&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mrow class=&#34;MJX-TeXAtom-ORD&#34;&gt;&lt;mo&gt;，&lt;/mo&gt;&lt;/mrow&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-460" style="width: 3.908em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.108em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.414em, 1003.06em, 2.685em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-461"><span class="mn" id="MathJax-Span-462" style="font-family: MathJax_Main;">1</span><span class="texatom" id="MathJax-Span-463"><span class="mrow" id="MathJax-Span-464"><span class="mo" id="MathJax-Span-465"><span style="font-family: STIXGeneral, &#34;Arial Unicode MS&#34;, serif; font-size: 80%; font-style: normal; font-weight: normal;">，</span></span></span></span><span class="mn" id="MathJax-Span-466" style="font-family: MathJax_Main;">2</span><span class="texatom" id="MathJax-Span-467"><span class="mrow" id="MathJax-Span-468"><span class="mo" id="MathJax-Span-469"><span style="font-family: STIXGeneral, &#34;Arial Unicode MS&#34;, serif; font-size: 80%; font-style: normal; font-weight: normal;">，</span></span></span></span><span class="mn" id="MathJax-Span-470" style="font-family: MathJax_Main;">3</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.291em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mo>，</mo></mrow><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-77"></script> 这样 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-78-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-471" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1000.47em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-472"><span class="mn" id="MathJax-Span-473" style="font-family: MathJax_Main;">3</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-78"></script> 个数据，有下面这几种不同的排列：
```java 
1, 2, 3
1, 3, 2
2, 1, 3
2, 3, 1
3, 1, 2
3, 2, 1

 ``` 
如何编程打印一组数据的所有排列呢？这里就可以用递归来实现。
如果我们确定了最后一位数据，那就变成了求解剩下 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-79-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-474" style="width: 2.967em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.355em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1002.26em, 2.591em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-475"><span class="mi" id="MathJax-Span-476" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-477" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mn" id="MathJax-Span-478" style="font-family: MathJax_Main; padding-left: 0.238em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.174em; border-left: 0px solid; width: 0px; height: 1.062em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>−</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-79"></script> 个数据的排列问题。而最后一位数据可以是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-80-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-479" style="width: 0.802em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.614em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.744em, 1000.61em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-480"><span class="mi" id="MathJax-Span-481" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.709em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-80"></script> 个数据中的任意一个，因此它的取值就有 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-81-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-482" style="width: 0.802em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.614em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.744em, 1000.61em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-483"><span class="mi" id="MathJax-Span-484" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.709em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-81"></script> 种情况。所以，“<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-82-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-485" style="width: 0.802em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.614em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.744em, 1000.61em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-486"><span class="mi" id="MathJax-Span-487" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.709em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-82"></script> 个数据的排列”问题，就可以分解成 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-83-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-488" style="width: 0.802em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.614em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.744em, 1000.61em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-489"><span class="mi" id="MathJax-Span-490" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.709em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-83"></script> 个“<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-84-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-491" style="width: 2.967em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.355em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1002.26em, 2.591em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-492"><span class="mi" id="MathJax-Span-493" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-494" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mn" id="MathJax-Span-495" style="font-family: MathJax_Main; padding-left: 0.238em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.174em; border-left: 0px solid; width: 0px; height: 1.062em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>−</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-84"></script> 个数据的排列”的子问题。
如果我们把它写成递推公式，就是下面这个样子：
```java 
假设数组中存储的是 1，2， 3...n。
        
f(1,2,...n) = {最后一位是 1, f(n-1)} + {最后一位是 2, f(n-1)} +...+{最后一位是 n, f(n-1)}。

 ``` 
如果我们把递推公式改写成代码，就是下面这个样子：
```java 
// 调用方式：
// int[]a = a={1, 2, 3, 4}; printPermutations(a, 4, 4);
// k 表示要处理的子数组的数据个数
public void printPermutations(int[] data, int n, int k) {
  if (k == 1) {
    for (int i = 0; i < n; ++i) {
      System.out.print(data[i] + " ");
    }
    System.out.println();
  }
 
  for (int i = 0; i < k; ++i) {
    int tmp = data[i];
    data[i] = data[k-1];
    data[k-1] = tmp;
 
    printPermutations(data, n, k - 1);
 
    tmp = data[i];
    data[i] = data[k-1];
    data[k-1] = tmp;
  }
}

 ``` 
如果不用我前面讲的递归树分析方法，这个递归代码的时间复杂度会比较难分析。现在，我们来看下，如何借助递归树，轻松分析出这个代码的时间复杂度。
首先，我们还是画出递归树。不过，现在的递归树已经不是标准的二叉树了。
![图片](https://static001.geekbang.org/resource/image/82/9b/82f40bed489cf29b14192b44decf059b.jpg)
第一层分解有 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-85-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-496" style="width: 0.802em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.614em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.744em, 1000.61em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-497"><span class="mi" id="MathJax-Span-498" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.709em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-85"></script> 次交换操作，第二层有 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-86-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-499" style="width: 0.802em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.614em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.744em, 1000.61em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-500"><span class="mi" id="MathJax-Span-501" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.709em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-86"></script> 个节点，每个节点分解需要 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-87-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-502" style="width: 2.967em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.355em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1002.26em, 2.591em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-503"><span class="mi" id="MathJax-Span-504" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-505" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mn" id="MathJax-Span-506" style="font-family: MathJax_Main; padding-left: 0.238em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.174em; border-left: 0px solid; width: 0px; height: 1.062em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>−</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-87"></script> 次交换，所以第二层总的交换次数是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-88-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-507" style="width: 5.885em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.708em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1004.61em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-508"><span class="mi" id="MathJax-Span-509" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-510" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mo" id="MathJax-Span-511" style="font-family: MathJax_Main; padding-left: 0.238em;">(</span><span class="mi" id="MathJax-Span-512" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-513" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mn" id="MathJax-Span-514" style="font-family: MathJax_Main; padding-left: 0.238em;">1</span><span class="mo" id="MathJax-Span-515" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>∗</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-88"></script>。第三层有 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-89-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-516" style="width: 5.885em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.708em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1004.61em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-517"><span class="mi" id="MathJax-Span-518" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-519" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mo" id="MathJax-Span-520" style="font-family: MathJax_Main; padding-left: 0.238em;">(</span><span class="mi" id="MathJax-Span-521" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-522" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mn" id="MathJax-Span-523" style="font-family: MathJax_Main; padding-left: 0.238em;">1</span><span class="mo" id="MathJax-Span-524" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>∗</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-89"></script> 个节点，每个节点分解需要 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-90-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-525" style="width: 2.967em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.355em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1002.31em, 2.591em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-526"><span class="mi" id="MathJax-Span-527" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-528" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mn" id="MathJax-Span-529" style="font-family: MathJax_Main; padding-left: 0.238em;">2</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.174em; border-left: 0px solid; width: 0px; height: 1.062em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>−</mo><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-90"></script> 次交换，所以第三层总的交换次数是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-91-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-530" style="width: 11.014em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.802em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1008.71em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-531"><span class="mi" id="MathJax-Span-532" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-533" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mo" id="MathJax-Span-534" style="font-family: MathJax_Main; padding-left: 0.238em;">(</span><span class="mi" id="MathJax-Span-535" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-536" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mn" id="MathJax-Span-537" style="font-family: MathJax_Main; padding-left: 0.238em;">1</span><span class="mo" id="MathJax-Span-538" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-539" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mo" id="MathJax-Span-540" style="font-family: MathJax_Main; padding-left: 0.238em;">(</span><span class="mi" id="MathJax-Span-541" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-542" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mn" id="MathJax-Span-543" style="font-family: MathJax_Main; padding-left: 0.238em;">2</span><span class="mo" id="MathJax-Span-544" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>∗</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>∗</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-91"></script>。
以此类推，第 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-92-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-545" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1000.52em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-546"><span class="mi" id="MathJax-Span-547" style="font-family: MathJax_Math-italic;">k</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-92"></script> 层总的交换次数就是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-93-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mo&gt;…&lt;/mo&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-548" style="width: 21.038em; display: inline-block;"><span style="display: inline-block; position: relative; width: 16.802em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1016.71em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-549"><span class="mi" id="MathJax-Span-550" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-551" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mo" id="MathJax-Span-552" style="font-family: MathJax_Main; padding-left: 0.238em;">(</span><span class="mi" id="MathJax-Span-553" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-554" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mn" id="MathJax-Span-555" style="font-family: MathJax_Main; padding-left: 0.238em;">1</span><span class="mo" id="MathJax-Span-556" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-557" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mo" id="MathJax-Span-558" style="font-family: MathJax_Main; padding-left: 0.238em;">(</span><span class="mi" id="MathJax-Span-559" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-560" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mn" id="MathJax-Span-561" style="font-family: MathJax_Main; padding-left: 0.238em;">2</span><span class="mo" id="MathJax-Span-562" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-563" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mo" id="MathJax-Span-564" style="font-family: MathJax_Main; padding-left: 0.238em;">…</span><span class="mo" id="MathJax-Span-565" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mo" id="MathJax-Span-566" style="font-family: MathJax_Main; padding-left: 0.238em;">(</span><span class="mi" id="MathJax-Span-567" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-568" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mi" id="MathJax-Span-569" style="font-family: MathJax_Math-italic; padding-left: 0.238em;">k</span><span class="mo" id="MathJax-Span-570" style="font-family: MathJax_Main; padding-left: 0.238em;">+</span><span class="mn" id="MathJax-Span-571" style="font-family: MathJax_Main; padding-left: 0.238em;">1</span><span class="mo" id="MathJax-Span-572" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>∗</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>∗</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo><mo>∗</mo><mo>…</mo><mo>∗</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mi>k</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-93"></script>。最后一层的交换次数就是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-94-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mo&gt;…&lt;/mo&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-573" style="width: 17.367em; display: inline-block;"><span style="display: inline-block; position: relative; width: 13.885em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1013.79em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-574"><span class="mi" id="MathJax-Span-575" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-576" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mo" id="MathJax-Span-577" style="font-family: MathJax_Main; padding-left: 0.238em;">(</span><span class="mi" id="MathJax-Span-578" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-579" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mn" id="MathJax-Span-580" style="font-family: MathJax_Main; padding-left: 0.238em;">1</span><span class="mo" id="MathJax-Span-581" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-582" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mo" id="MathJax-Span-583" style="font-family: MathJax_Main; padding-left: 0.238em;">(</span><span class="mi" id="MathJax-Span-584" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-585" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mn" id="MathJax-Span-586" style="font-family: MathJax_Main; padding-left: 0.238em;">2</span><span class="mo" id="MathJax-Span-587" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-588" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mo" id="MathJax-Span-589" style="font-family: MathJax_Main; padding-left: 0.238em;">…</span><span class="mo" id="MathJax-Span-590" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mn" id="MathJax-Span-591" style="font-family: MathJax_Main; padding-left: 0.238em;">2</span><span class="mo" id="MathJax-Span-592" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mn" id="MathJax-Span-593" style="font-family: MathJax_Main; padding-left: 0.238em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>∗</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>∗</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo><mo>∗</mo><mo>…</mo><mo>∗</mo><mn>2</mn><mo>∗</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-94"></script>。每一层的交换次数之和就是总的交换次数。
```java 
n + n*(n-1) + n*(n-1)*(n-2) +... + n*(n-1)*(n-2)*...*2*1

 ``` 
这个公式的求和比较复杂，我们看最后一个数，<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-95-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mo&gt;…&lt;/mo&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-594" style="width: 17.367em; display: inline-block;"><span style="display: inline-block; position: relative; width: 13.885em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1013.79em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-595"><span class="mi" id="MathJax-Span-596" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-597" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mo" id="MathJax-Span-598" style="font-family: MathJax_Main; padding-left: 0.238em;">(</span><span class="mi" id="MathJax-Span-599" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-600" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mn" id="MathJax-Span-601" style="font-family: MathJax_Main; padding-left: 0.238em;">1</span><span class="mo" id="MathJax-Span-602" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-603" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mo" id="MathJax-Span-604" style="font-family: MathJax_Main; padding-left: 0.238em;">(</span><span class="mi" id="MathJax-Span-605" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-606" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mn" id="MathJax-Span-607" style="font-family: MathJax_Main; padding-left: 0.238em;">2</span><span class="mo" id="MathJax-Span-608" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-609" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mo" id="MathJax-Span-610" style="font-family: MathJax_Main; padding-left: 0.238em;">…</span><span class="mo" id="MathJax-Span-611" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mn" id="MathJax-Span-612" style="font-family: MathJax_Main; padding-left: 0.238em;">2</span><span class="mo" id="MathJax-Span-613" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mn" id="MathJax-Span-614" style="font-family: MathJax_Main; padding-left: 0.238em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>∗</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>∗</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo><mo>∗</mo><mo>…</mo><mo>∗</mo><mn>2</mn><mo>∗</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-95"></script> 等于 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-96-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;!&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-615" style="width: 1.132em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.896em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.508em, 1000.8em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-616"><span class="mi" id="MathJax-Span-617" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-618" style="font-family: MathJax_Main;">!</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>!</mo></math></span></span><script type="math/tex" id="MathJax-Element-96"></script>，而前面的 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-97-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;−&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-619" style="width: 2.967em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.355em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1002.26em, 2.591em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-620"><span class="mi" id="MathJax-Span-621" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-622" style="font-family: MathJax_Main; padding-left: 0.238em;">−</span><span class="mn" id="MathJax-Span-623" style="font-family: MathJax_Main; padding-left: 0.238em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.174em; border-left: 0px solid; width: 0px; height: 1.062em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>−</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-97"></script> 个数都小于最后一个数，所以，总和肯定小于 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-98-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;!&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-624" style="width: 3.061em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.449em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.508em, 1002.36em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-625"><span class="mi" id="MathJax-Span-626" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-627" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mi" id="MathJax-Span-628" style="font-family: MathJax_Math-italic; padding-left: 0.238em;">n</span><span class="mo" id="MathJax-Span-629" style="font-family: MathJax_Main;">!</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mo>∗</mo><mi>n</mi><mo>!</mo></math></span></span><script type="math/tex" id="MathJax-Element-98"></script>，也就是说，全排列的递归算法的时间复杂度大于 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-99-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;!&lt;/mo&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-630" style="width: 3.061em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.449em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1002.36em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-631"><span class="mi" id="MathJax-Span-632" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-633" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-634" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-635" style="font-family: MathJax_Main;">!</span><span class="mo" id="MathJax-Span-636" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>!</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-99"></script>，小于 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-100-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&#34;false&#34;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;∗&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;!&lt;/mo&gt;&lt;mo stretchy=&#34;false&#34;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-637" style="width: 5.038em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.002em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.461em, 1003.91em, 2.732em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-638"><span class="mi" id="MathJax-Span-639" style="font-family: MathJax_Math-italic;">O</span><span class="mo" id="MathJax-Span-640" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-641" style="font-family: MathJax_Math-italic;">n</span><span class="mo" id="MathJax-Span-642" style="font-family: MathJax_Main; padding-left: 0.238em;">∗</span><span class="mi" id="MathJax-Span-643" style="font-family: MathJax_Math-italic; padding-left: 0.238em;">n</span><span class="mo" id="MathJax-Span-644" style="font-family: MathJax_Main;">!</span><span class="mo" id="MathJax-Span-645" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.35em; border-left: 0px solid; width: 0px; height: 1.356em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>∗</mo><mi>n</mi><mo>!</mo><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-100"></script>，虽然我们没法知道非常精确的时间复杂度，但是这样一个范围已经让我们知道，全排列的时间复杂度是非常高的。
这里我稍微说下，掌握分析的方法很重要，思路是重点，不要纠结于精确的时间复杂度到底是多少。
## 内容小结
今天，我们用递归树分析了递归代码的时间复杂度。加上我们在排序那一节讲到的递推公式的时间复杂度分析方法，我们现在已经学习了两种递归代码的时间复杂度分析方法了。
有些代码比较适合用递推公式来分析，比如归并排序的时间复杂度、快速排序的最好情况时间复杂度；有些比较适合采用递归树来分析，比如快速排序的平均时间复杂度。而有些可能两个都不怎么适合使用，比如二叉树的递归前中后序遍历。
时间复杂度分析的理论知识并不多，也不复杂，掌握起来也不难，但是，在我们平时的工作、学习中，面对的代码千差万别，能够灵活应用学到的复杂度分析方法，来分析现有的代码，并不是件简单的事情，所以，你平时要多实战、多分析，只有这样，面对任何代码的时间复杂度分析，你才能做到游刃有余、毫不畏惧。
## 课后思考
<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-101-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-646" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1000.43em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-647"><span class="mn" id="MathJax-Span-648" style="font-family: MathJax_Main;">1</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.944em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-101"></script> 个细胞的生命周期是 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-102-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-649" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1000.47em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-650"><span class="mn" id="MathJax-Span-651" style="font-family: MathJax_Main;">3</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-102"></script> 小时，<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-103-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-652" style="width: 0.661em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.52em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.555em, 1000.43em, 2.496em, -999.998em); top: -2.351em; left: 0em;"><span class="mrow" id="MathJax-Span-653"><span class="mn" id="MathJax-Span-654" style="font-family: MathJax_Main;">1</span></span><span style="display: inline-block; width: 0px; height: 2.355em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.944em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-103"></script> 小时分裂一次。求 <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-104-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&#34;http://www.w3.org/1998/Math/MathML&#34;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-655" style="width: 0.802em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.614em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.744em, 1000.61em, 2.449em, -999.998em); top: -2.304em; left: 0em;"><span class="mrow" id="MathJax-Span-656"><span class="mi" id="MathJax-Span-657" style="font-family: MathJax_Math-italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.308em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.056em; border-left: 0px solid; width: 0px; height: 0.709em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-104"></script> 小时后，容器内有多少细胞？请你用已经学过的递归时间复杂度的分析方法，分析一下这个递归问题的时间复杂度。
欢迎留言和我分享，我会第一时间给你反馈。
![图片](https://static001.geekbang.org/resource/image/8e/d3/8e603e3d795fc0ab2698f6f5eabf14d3.jpg)
精选评论 
 ------- 
 ::: details 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ```java 
假设细胞到了第三个小时是先分裂完再死亡，那么递推公式就应该是：
f(n) = f(n-1)*2 - f(n-3)
一次乘法和一次减法一起看作一次基本操作消耗，那么情况和斐波那契数列很像。
最高的树应该有n层， 最短的是n/3层，每层操作数都是指数增长。
那么时间复杂度应该是在O(2^n)量级的。
```
 ----- 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ```java 
有些同学不明白点赞第一的意思，在此试着解释一下。

假设细胞先分裂再死亡，即，每个细胞分裂三次后死亡（存活三个小时）。

n 从第 0 个小时开始，

n = 0，f(0) = 1

n = 1，f(1) = 2*f(1)

n = 2，f(2) = 2*f(1)

n = 3，f(3) = 2*f(2) - f(0) ，减去存活了三个小时的细胞个数。

n = 4，f(4) = 2*f(3) - f(1)，减去存活了三个小时的细胞个数。

以此类推：

f(n) = 2*f(n-1) - f(n-3)，减去存活了三个小时的细胞个数。

```
 ----- 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ```java 
说个有意思的现象，我平时除了看专栏本身的内容，我也会看留言。我发现从专栏开始时，精品留言点赞数达到500多，随着专栏的前行，点赞的人越来越少了😄

从中，也能发现端倪。

这挺有意思的
```
 ----- 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ```java 
思考题：
f0=1
f1=1+1=2
f2=1+1+2=4
f3=1+1+2+3-1=6 = f1 + f2
f4=1+1+2+3-1+5-1=10 = f2+f3
f5=1+1+2+4-1+5-1+8-2=16 = f3+f4
f（n）= f（n-1） + f（n-2）

与斐波那契数列的递归复杂度相同。
```
 ----- 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ```java 
打卡，立flag的同学少了一个数量级都不止啊
```
 ----- 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ```java 
细胞分裂问题有个地方不解，1个细胞分裂之后不就变成2个新的细胞了，那么原来的细胞不就不存在了吗？那3小时后死亡怎么计算？
```
 ----- 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ----- 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ----- 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ```java 
如果到了第三小时先分裂再死亡应该是f(n) = 2*f(n-1) - f(n-4)

—————————-
 
 public static int func(int hour){
   if(hour == 0) return 1;
   if(hour == 1) return 2;
   if(hour == 2) return 4;
   if(hour == 3) return 7; 
   return 2*func(hour -1) - func(hour - 4);
 }

————-
带入hour=4 
结果： 2 * func(3)-func(0)= 13
```
 ----- 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ```java 
点赞第一的递推可能有些问题，这里假设经过三个小时的细胞分裂后再死亡。
通过留言可以看出有些同学可能没搞明白细胞分裂的方式，根据题意，细胞的生命周期是三个小时，一个小时后，第一个细胞分裂，此时细胞总数变成 2，但是这两个细胞的生存时间是不一样的，如果都当成新生细胞即存活时间为 0，那么给定的 3小时生命周期也就没意义了，所以这个时候其中一个细胞的生存时间变成了 1，另外一个刚分裂出来的是 0，下面简单表示一下分裂进程（-1 表示死亡）
时间          细胞状态 (生存时间)                                      细胞总数
  0              0                                                                        1
  1               1  0                                                                    2
  2              2  1  0  0                                                             4
  3             -1  2  1  1  0  0  0  0                                              7
  4             -1  2  2  1  1  1  1  0  0  0  0  0  0  0                        13
  5             -1  -1  2  2  2  2  1  1  1  1  1  1  1 
                   0  0  0  0  0  0  0  0  0  0  0  0  0                        24
  ....               .............................................                                   ....
f0 = 1
f1 = 2
f2 = 4
f3 = 7
可以发现到第四个小时的时候，规律出来了，在第四个小时死亡的细胞是三小时前也就是第一个小时的时候同时出生的细胞，而在第一个小时同时出生的细胞数等于第一个小时前一个小时的细胞总数
所以有递推式：f(n) = 2 * f(n - 1) - f(n - 4)
```
 ----- 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ```java 
思路：f(n) = 2 * f(n-1) - 【n时刻点死掉的细胞数量】
而在【n时刻点死掉的细胞数量】就是【n-3时刻点新分裂的细胞数量】;【n-3时刻点新分裂的细胞数量】就是【n-4时刻点的细胞数总数】，即f(n-4)

故递推公式：f(n) = 2 * f(n-1) - f(n-4)

```
 ----- 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ```java 
老师，有几个问题不明白：
1. 求归并排序的时间复杂度中
满二叉树的高度计算公式中的n指的是树中的节点的总个数，而归并排序中的n指的却是叶子节点的个数。所以归并排序中树的高度，我计算出来的是h=log2^2n-1。
2. 实战二中
“f(n) 分解为 f(n-1) 和 f(n-2)，每次数据规模都是 -1 或者 -2，叶子节点的数据规模是 1 或者 2。“
叶子节点为1或者2都不能再往下分叉了，所以，我计算出来的最长路径是n-2。举个具体的例子：n=5时，最长路径为3。
我计算出来的最短路径依据n的不同还会不同，
具体的例子：n=5时，最短路径为2，n=6时，最短路径依然为2。

是我理解的有偏差吗？请老师指点。
```
 ----- 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ```java 
假设细胞3小时候先分裂再死亡。
life3 表示还能活3个小时， life2表示还能活2个小时，life1表示还能活1个小时
假设在第x时刻，存活细胞数为life1 = x, life2= y, life3 = z个，总细胞sum(x)
在第x + 1时刻，此时刻的life1细胞均来自上一时刻的life2细胞。此时刻life2细胞均来自上一时刻的life3细胞。上一时刻life1细胞死亡后，会分列均等数量life3细胞，因此上一时刻所有细胞均会分裂，所以此时刻life3细胞等于上一时刻所有细胞数。
所以x + 1时刻，life1 = y, life2 = z, life3 = sum(x), sum(x+1) = y + z  + sum(x)
x + 2, life1 = z, life2 = sum(x), life3 = sum(x + 1), sum(x+2) = z + sum(x) + sum(x + 1)
x + 3, life1 = sum(x), life2 = sum(x + 1), life3 = sum(x + 2) , sum(x + 3) = sum(x) + sum(x + 1) + sum(x + 2)
因此递推式为
sum(x) = sum(x - 1) + sum(x - 2) + sum(x - 3)
1 sum函数
3 sum函数
9 sum函数
所以是3的0次方+3的1次方+3的二次方，为几何级数，算法复杂度为O(3的n次方)
```
 ----- 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ```java 
有几点问题不懂
1.实战二：分析斐波那契数列的时间复杂度 一节提到 
“f(n) 分解为 f(n-1) 和 f(n-2)，每次数据规模都是 -1 或者 -2，叶子节点的数据规模是 1 或者 2。所以，从根节点走到叶子节点，每条路径是长短不一的。如果每次都是 -1，那最长路径大约就是 n；如果每次都是 -2，那最短路径大约就是 n/2。”数据规模都是-1，-2 这怎么理解？每次都是-1，最长路径大约就是n  这又是怎么理解的？ 
2.实战3中提到
“第一层分解有 n 次交换操作，第二层有 n 个节点，每个节点分解需要 n-1 次交换，所以第二层总的交换次数是 n*(n-1)。第三层有 n*(n-1) 个节点，每个节点分解需要 n-2 次交换，所以第三层总的交换次数是 n*(n-1)*(n-2)。”
交换操作的次数是怎么的出来的？
这对于我来讲就好比，数学老师讲了一堆看似简单的东西（有同学基础不好），最后老师最后落笔：所以1+1=2，但我还是一脸懵逼
```
 ----- 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ```java 
我是来重温算法的，所以看起来还是通俗易懂的，回想当年大学学算法一个算法最少要在poj上做几十道题才能比较好理解，算法和数据结构真不是看俩便书或者文章就能理解的，一定要是要多练习的！而且还要明白一个事实，就算练习了，过段时间你也会忘记！所以我又来重温了！
```
 ----- 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ```java 
递归树分析递归算法的时间复杂度

把递归树画出来，计算每一层和每一层的一个耗时情况，求和
思考题：拒绝思考
```
 ----- 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ```java 
如果第三个小时不分裂，死亡：
f(n)=f(n-1)+f(n-2)
第三个小时分裂之后再死亡：
有两个公式表达
f(n)=f(n-1)+f(n-2)+f(n-3)

之后再用斐波那契数列中老师的树的分析方式分析，得到结果
第三个小时不分裂，就死亡，与斐波那契数列结果相同
第三个小时先分裂再死亡，时间复杂度在
O(3^n/3）至O(3^n)之间
```
 ----- 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ```java 
细胞分裂后算是新细胞吗？这个生命周期为3小时有什么用？难道第一次分裂完成后的两个细胞，一个年龄为1小时，一个年龄为0小时？
```
 ----- 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ```java 
f(0) =  1
f(1) = 2
f(2) = 4
f(3) = 8
f(n) = f(n-1) + f(n-2) + f(n-3) + f(n-4)
```
 ----- 
<a style='font-size:1.5em;font-weight:bold'></a> 


 ```java 
如果先分裂后死亡细胞数量为1，2，4，7，13（置顶算出的是12因为多减了一个死亡的细胞，在最初f（3）已经减去了已经死亡的细胞f（0）此时f（1）中存活的细胞事实上只有一个，所以在f（4）时只需要减1即减去f（0））递推公式为f(n)=2*f(n-1)-f(n-4) 希望老师说一下标准答案
```
 ----- 
:::