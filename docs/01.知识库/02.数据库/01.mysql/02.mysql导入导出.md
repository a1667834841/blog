---
title: mysql导入导出
date: 2021-08-30 19:15:17
permalink: /pages/2a6af9/
categories:
  - 工具书
  - 数据库
  - mysql
tags:
  - 
---
## mysqldump 导入导出 

### 到出

```
mysqldump --column-statistics=0 -uroot -hmsite-server.wonderlandnet.cn -psckj123456 prj_shangye_new_test > C:\Users\DELL\Desktop\md\db\test.sql

-- 线上
mysqldump --column-statistics=0 -usysa -hrm-bp11j9r390x32c307o.mysql.rds.aliyuncs.com -pSckj@123456 prj_shangye_new > C:\Users\DELL\Desktop\md\db\test_online.sql
```

解释：

```
--column-statistics=0 因为新版的mysqldump默认启用了一个新标志，通过- -column-statistics=0来禁用他
-u用户名
-h 地址
-p 密码
数据库
> 目标地址
```

### 导入

```
mysql -uroot -proot -h127.0.0.1 -P3306 表名<C:\Users\DELL\Desktop\md\db\test.sql

-- 线上
mysql -uroot -proot -h127.0.0.1 -P3306 shangye_test<C:\Users\DELL\Desktop\md\db\test_online.sql
```

mysql -uroot -psckj123456 -hmsite-server.wonderlandnet.cn -P3306 prj_shangye_new_dev<C:\Users\DELL\Desktop\md\db\test.sql





## 删除认为多个字段为重复数据，且保留一条

```sql
-- 根据多个字段认定为重复数据，查询超过重复数大于1的数据
SELECT orderBillId,commodityBillId,count(*) count FROM `tb_third_nc_order` GROUP BY orderBillId,commodityBillId
HAVING count > 0
order by count desc


select count(id) from tb_third_nc_order;
select * from tb_third_nc_order where orderBillId = 'YG202103124096142311679' and commodityBillId = '7120'

-- 删除多个字段认定为重复数据，且保留一条
delete from tb_third_nc_order where (orderBillId,commodityBillId) in (
select * from (
SELECT orderBillId,commodityBillId FROM `tb_third_nc_order` GROUP BY orderBillId,commodityBillId
HAVING count(*) > 1
order by count(*) desc ) s1
)
and id not in (
select * from (
SELECT min(id) id FROM `tb_third_nc_order` where resultType = 0 GROUP BY orderBillId,commodityBillId
HAVING count(*) > 1
order by count(*) desc ) s2
)
```

