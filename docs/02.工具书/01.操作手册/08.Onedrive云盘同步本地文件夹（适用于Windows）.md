---
title: Onedrive云盘同步本地文件夹（适用于Windows）
date: 2021-08-30 19:15:16
permalink: /pages/f402a4/
categories:
  - 工具书
  - 操作手册
tags:
  - 
---
0 前言
购买了Office365家庭版之后试用了一下订阅自带的云盘，充分体会到了Onedrive的潜力。办公文档上云，妈妈再也不用担心系统崩溃文件丢失啦~

图片：office的文件保存在Onedrive上可以进行自动保存
但问题是，Onedrive的文件只能统一同步到一个文件目录下，而当想要同步的文件目录不止一个的时候就不太方便，因此这里给出一个解决办法：利用mklink语句给待同步的文件目录在Onedrive文件夹下创建映射。

1 关于mklink命令
1.1 简介
NTFS 符号链接又称“符号链接”，是 NTFS 文件系统中指向文件系统中的另一个对象的一类对象，被指向的对象叫做“目标”。mklink 是 Windows 下用于创建符号链接的工具，存在于 Windows Vista 及以后版本的 Windows 操作系统中。

1.2 使用方式
`MKLINK [[/D] | [/H] | [/J]] Link Target `
1
说明：
/D 创建目录符号链接而不是文件符号链接（默认为文件符号链接）
/H 创建硬链接而不是符号链接
/J 创建目录连接点
Link 指定新的符号链接名称
Target 指定新链接引用的路径（绝对路径或者相对路径均可）

1.3 注意
参数 Link 和 Target 要求不能使用 Windows 中不允许用作文件名的字符（\ / : * ? " < > |）。并且如果 Link 和 Target 这两个参数中需要包含空格，则必须使用英文双引号将内容引起来，以避免参数识别错误。

1.4 限制
符号链接在系统启动的时候是不工作的，所以下面这些文件（夹）是不可以作为符号链接替换的：

```
\Windows
\Windows\system32
\Windows\system32\config
```

2 具体操作方法
打开Onedrive，在右下角系统托盘上点击右键，选择设置。
选择“自动保存”选项卡，在“保护重要文件夹”中勾选文档。这一步的操作是为了保证文档文件夹中的内容电脑时刻与云端保持同步。注意：选择之后本地的文档将成为指向Onedrive文件夹的目录，因此保存在其中的虚拟机或VS工程文件等有可能出现无法读取的现象，请注意在操作后进行调整。
假设我要同步的本地文件夹是E:\工作，而Onedrive在本地的保存目录为`C:\Users\用户名\OneDrive`。
以管理员模式打开命令提示符（Win10用户可直接搜索cmd，然后右键命令提示符搜索结果的程序，选择以管理员权限运行）。在打开的窗口中输入命令：`mklink /d C:\Users\用户名\OneDrive\工作 E:\工作`。注意：执行本操作时请确保`C:\Users\用户名\OneDrive`下没有名为“工作”的目录，否则将会报错。
回车键执行后，命令提示符返回“……创建的文件链接”字样的文字，即说明建立连接成功。
注意：如果文件目录中包含空格，则在输入命令的时候应使用英文双引号将该完整目录括起来。

到这里，所有的步骤就完成了，你可以尝试进行添加文件，删除文件操作。你会发现，两个不同地址的文件随时在保持着同步（同一个文件拥有了两个地址：原地址和Onedrive目录下的地址）。同理，当打开Onedrive文件同步功能是，该目录下的文件也与云端保持着一致。
![image-20210815210051082](https://gitee.com/zxqzhuzhu/imgs/raw/master/picGo/image-20210815210051082.png)