---
title: 2022-01-17_note
date: 2022-11-13 23:10:11
permalink: /pages/dce135/
categories:
  - 每日随笔
  - 2022-01
tags:
  - 
---
**mood:** :smile:  									**date: 2022-01-17**  
## 今日计划  
------
- [ ]  打包好，推送镜像到阿里云和dockerhub
- [ ]  推送coding
## 明日计划  
------
- [ ]  
## 随写 
------



### 备份数据库

https://blog.csdn.net/helloxiaozhe/article/details/77680255

 [删库不跑路-详解MySQL备份策略](https://segmentfault.com/a/1190000019955399)

```
-- 备份
mysqldump --opt --single-transaction  --default-character-set=utf8 -h<host> -u<user> -p<password> --databases db1 db2.. > backup.sql
例子：
mysqldump --opt --single-transaction  --default-character-set=utf8 -h 120.26.74.26 -u root -pLvcheng@2o21!  --databases luckystore_uat > D:\documents\数据库备份\uat_bak.sql

-- 恢复
mysql -h<host> -u<user> -p<password> < backup.sql
例子：
mysql -h127.0.0.1 -uroot -proot < D:\documents\数据库备份\uat_bak.sql

```

- `--opt` 如果有这个参数表示同时激活了mysqldump命令的quick，add-drop-table，add-locks，extended-insert，lock-tables参数，它可以给出很快的转储操作并产生一个可以很快装入MySQL服务器的转储文件。当备份大表时，这个参数可以防止占用过多内存
- `--single-transaction` 设置事务的隔离级别为可重复读，然后备份的时候开启事务，这样能保证在一个事务中所有相同的查询读取到同样的数据。注意，这个参数只对支持事务的引擎有效，如果有 `MyISAM` 的数据表，并不能保证数据一致性
- `-A` 导出全部数据库
- `–-default-character-set=charset` 指定导出数据时采用何种字符集
- `--master-data=2` 表示在备份过程中记录主库的 `binlog` 和 `pos` 点，并在dump文件中注释掉这一行，在使用备份文件做新备库时会用到

### 利用Hexo搭建你的个人网站 - 中篇

https://xutong.tech/setup-your-first-blog-with-hexo-2/

```
 - name: Sync gh-pages to coding.net 
      run: |
        git remote rm origin
        git remote add origin git@e.coding.net:ggball/onemanager-java/Onemanager-java.git
        git config user.name ggball
        git config user.email 1667834841@qq.com
        git push -f origin master
```

### Dockerfile传参

https://blog.csdn.net/huangjiazhi_/article/details/107204137

```
Dockerfile 内容
 
FROM python:2.7-slim
COPY startup.sh /opt
RUN chmod +x /opt/startup.sh
ARG envType=default_value
ENV envType ${envType}
CMD ["/opt/startup.sh","${envType}"]
 
 
执行构建命令
$ docker build -t yellow:2.0 --build-arg envType=dev .
 
备注：yellow:2.0（镜像名称:镜像标签）  --build-arg 指定参数
```



碰到的问题



找不到配置文件的内容

解决办法：不使用变量

![image-20220117160636965](https://img.ggball.top/picGo/image-20220117160636965.png)

```
# docker容器 保持运行
docker run -it --rm ggball/onemanager-java:latest /bin/bash

arg是在 build 的时候存在的, 可以在 Dockerfile 中当做变量来使用

env是容器构建好之后的环境变量, 不能在 Dockerfile 中当参数使用
```

![image-20220117171616752](https://img.ggball.top/picGo/image-20220117171616752.png)