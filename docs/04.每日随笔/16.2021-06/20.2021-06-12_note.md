---
title: 2021-06-12_note
date: 2022-11-13 23:10:11
permalink: /pages/ebcb6e/
categories:
  - 每日随笔
  - 2021-06
tags:
  - 
---
**mood:** :smile:  																		**date: 2021-06-12**  
## 今日计划  
------
- [ ]  spring学习
- [ ]  Tomcat 手动实现一个http服务器
- [ ]  制作奶茶
- [ ]  笔记
## 明日计划  
------
- [ ]  
## 随写 
------

ioc 依赖来源

自定义bean

容器内建的bean对象

容器内的内建依赖

![image-20210612095546275](2021-06-12_note.assets/image-20210612095546275.png)

![image-20210612095845352](2021-06-12_note.assets/image-20210612095845352.png)

1. applicationContext是BeanFactory的超集

```java

public abstract class AbstractRefreshableApplicationContext extends AbstractApplicationContext {

		.....
		@Override
	public final ConfigurableListableBeanFactory getBeanFactory() {
		synchronized (this.beanFactoryMonitor) {
			if (this.beanFactory == null) {
				throw new IllegalStateException("BeanFactory not initialized or already closed - " +
						"call 'refresh' before accessing beans via the ApplicationContext");
			}
			return this.beanFactory;
		}
	}
    
    protected DefaultListableBeanFactory createBeanFactory() {
		return new DefaultListableBeanFactory(getInternalParentBeanFactory());
	}
    
    	/**
	 * Return the internal bean factory of the parent context if it implements
	 * ConfigurableApplicationContext; else, return the parent context itself.
	 * @see org.springframework.context.ConfigurableApplicationContext#getBeanFactory
	 */
	@Nullable
	protected BeanFactory getInternalParentBeanFactory() {
		return (getParent() instanceof ConfigurableApplicationContext ?
				((ConfigurableApplicationContext) getParent()).getBeanFactory() : getParent());
	}
    
}

public interface ConfigurableApplicationContext extends ApplicationContext, Lifecycle, Closeable 
{
	......
        
        ConfigurableListableBeanFactory getBeanFactory() throws IllegalStateException;
}

public interface ApplicationContext extends EnvironmentCapable, ListableBeanFactory, HierarchicalBeanFactory,
		MessageSource, ApplicationEventPublisher, ResourcePatternResolver {
		
		......
		}

public interface ListableBeanFactory extends BeanFactory {
    
}


/**
ConfigurableApplicationContext 因为也是BeanFactory的超集，本身就是一个BeanFactory，但是spring是通过getBeanFactory*()来拿到BeanFactory
代码可以看出，AbstractRefreshableApplicationContext 创建BeanFactory是通过拿到父级的ApplicationContext，然后再getBeanFactory()拿到BeanFactory
*/
```

