---
title: 2021-08-09_note
date: 2022-11-13 23:10:11
permalink: /pages/e4eee9/
categories:
  - 每日随笔
  - 2021-08
tags:
  - 
---
**mood:** :smile:  																		**date: 2021-08-09**  
## 今日计划  
------
- [x]  修改 判断订单能否开票的接口（app,pc）（不做）
- [x]  逆向推发票 。作废发票不推
## 明日计划  
------
- [ ]  
## 随写 
------

web/giftOrder/info

# [grep/sed/awk命令查看指定时间段的日志](https://www.cnblogs.com/python-wen/p/12331751.html)

***grep命令**

今天遇到研发要求查询定时任务（elastic-job）在14:00-14:40的日志，使用grep命令很方便：

```
命令： ``grep` `'时间'` `'日志文件名 '
```

1、例如查询2020-02-19 14:10到2020-02-19 14:15区间的日志

```
grep` `"2020-02-19 14:1[0-5]"` `dubbo-elastic-job.log
```

查询日志时间正好截至2020 02-19 14:15

![img](https://img.ggball.top/picGo/1444822-20200219153238525-1854651034.png)

 

 2、例如查询当天10点到11点的日志

```
grep` `"2020-02-19 1[0-1] "` `dubbo-elastic-job.log
```

 

***sed命令---推荐使用**　　

1、例如查询2020-02-19 14:10到2020-02-19 14:15区间的日志

```
sed` `-n ``'/2020-02-19 14:10:00/,/2020-02-19 14:15:00/p'` `dubbo-elastic-job.log
```

 

***awk命令**　　

1、例如查询今天14:10:10 到14:12:59区间的日志，注意时间要用引号

```
awk` `'$2>"14:10:10" && $2<"14:12:59"'` `dubbo-elastic-job.log　　
```

注意参数$1和$2的取值，我这里$1是指年月日，$2是指时分秒。

　　



 1.使用utf-8字符编码集varchar最大长度是(65535-2)/3=21844个字符（超过255个字节会有2字节的额外占用空间开销，所以减2,如果是255以下,则减1）。
   2.使用 utf-8mb4字符集，mysql中使用 utf-8mb4 字符集一个字符占用4个字节，所以 varchar 最大长度是(65535-2)/4=16383 个字符（超过255个字节会有2字节的额外占用空间开销，所以减2,如果是255以下,则减1）。



TEXT 最大长度是 65535 (2^16 - 1) 个字节   可以存 16383 个字符（以前）

MEDIUMTEXT 最大长度是 16777215 (2^24 - 1) 个字符。 可以存 4194303个字符（现在）

一个订单 增加 1120个字符

这次出错存了 **84310**个字符

![image-20210809183545546](https://img.ggball.top/picGo/image-20210809183545546.png)

connection: keep-alive

Transfer-Encoding: chunked