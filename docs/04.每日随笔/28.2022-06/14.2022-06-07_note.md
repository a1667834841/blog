---
title: 2022-06-07_note
date: 2022-11-13 23:10:12
permalink: /pages/028ba8/
categories:
  - 每日随笔
  - 2022-06
tags:
  - 
---
**mood:** :smile:  									**date: 2022-06-07**  
## 今日计划  
------
- [ ]  设计模式（享元模式）
- [ ]  15个单词
## 明日计划  
------
- [ ]  
## 随写 
------

所谓“享元”，顾名思义就是被共享的单元。享元模式的意图是复用对象，节省内存，前提是享元对象是不可变对象。

**区别两种设计模式，不能光看代码实现，而是要看设计意图，也就是要解决的问题**





###### Linux后台运行命令nohup实现屏幕输出记录到日志文件行命令


nohup命令：如果你正在运行一个进程，而且你觉得在退出帐户时该进程还不应该结束，那么可以使用nohup命令。该命令忽略所有挂断（SIGHUP）信号，可以在你退出帐户/关闭终端之后继续运行相应的进程。nohup就是不挂断的意思( no hang up)。
该命令的一般形式为：

```
nohup yourcommand &
```


yourcommand:启动对象命令。可以跟该命令需要的各种参数。
&是指在后台运行，但当用户推出(挂起)的时候，命令自动也跟着退出. nohup与&结合起来，可以实现不挂断的后台运行。

实现屏幕输出记录到日志文件
下面的命令可以实现屏幕输出记录到当前目录的nohup.out文件中。

```
nohup yourcommand 2>&1 &
```


在上面的例子中，0 – stdin (standard input)，1 – stdout (standard output)，2 – stderr (standard error) ；
2>&1是将标准错误（2）重定向到标准输出（&1），标准输出（&1）再被重定向输入到日志文件中。

在上面的例子中，0 – stdin (standard input)，1 – stdout (standard output)，2 – stderr (standard error) ；
2>&1是将标准错误（2）重定向到标准输出（&1），标准输出（&1）再被重定向输入到日志文件中。

如果希望将日志输出到别的文件中，可以增加一个输出重定位参数。例子如下。

```
nohup yourcommand > myout.log 2>&1 &
```


其中myout.log是保存输出的文件名称。

其中myout.log是保存输出的文件名称。

Tips：
">"大于符号表示重定向输出到一个新设备/文件，“>>”表示追加输出到某个文件。

后台运行时忽略屏幕输出

```
nohup yourcommand > /dev/null 2>&1 &
```


这条命令将标准输出1重定向到/dev/null中。 /dev/null代表linux的空设备文件，所有往这个文件里面写入的内容都会丢弃。由于有 2>&1, 错误输出2重定向到标准输出1，这样错误输出也会丢失。如果要执行的命令本身记录了自己的错误信息，这样做是没有任何问题的。


这条命令将标准输出1重定向到/dev/null中。 /dev/null代表linux的空设备文件，所有往这个文件里面写入的内容都会丢弃。由于有 2>&1, 错误输出2重定向到标准输出1，这样错误输出也会丢失。如果要执行的命令本身记录了自己的错误信息，这样做是没有任何问题的。

实时监测日志输出内容命令：tail
tail 命令是nohup命令的好搭档。配合-f参数，可以实时监视向日志文件增加的信息。

```
tail -f myout.log 
```



tail -f 等同于–follow=descriptor，根据文件描述符进行追踪，当文件改名或被删除，追踪停止
tail -F 等同于–follow=name --retry，根据文件名进行追踪，并保持重试，即该文件被删除或改名后，如果再次创建相同的文件名，会继续追踪
tail -n num 从最后的num行开始跟踪。num默认值是10，如果觉得太少，加上这个参数。
tailf 等同于tail -f -n 10（貌似tail -f或-F默认也是打印最后10行，然后追踪文件），与tail -f不同的是，如果文件不增长，它不会去访问磁盘文件，所以tailf特别适合那些便携机上跟踪日志文件，因为它减少了磁盘访问，可以省电。

监测程序是否在正常运行中：ps
ps命令也是nohup命令的好搭档，用于显示当前进程 (process) 的状态。可以监视后台程序是否在正常运行中或者已经挂掉。

```
ps -ef|grep yourcommand
```



docker pull registry.cn-hangzhou.aliyuncs.com/ggball/website-backend:latest

docker run -itd --name website-backend -p 8080:8080 --rm registry.cn-hangzhou.aliyuncs.com/ggball/website-backend:latest /bin/bash