---
title: 2022-09-30_note
date: 2022-11-13 23:10:12
permalink: /pages/f1911c/
categories:
  - 每日随笔
  - 2022-09
tags:
  - 
---
**mood:** :smile:  									**date: 2022-09-30**  
## 今日计划  
------
- [ ]  
- [ ]  15个单词
## 明日计划  
------
- [ ]  
## 随写 
------

```
C:\Users\16678\.jdks\corretto-1.8.0_292\bin\java.exe -Dmaven.multiModuleProjectDirectory=D:\project\idea\ggball_test\agent_demo\agent -Dmaven.home=D:\Apache\maven\apache-maven-3.8.1-bin\apache-maven-3.8.1 -Dclassworlds.conf=D:\Apache\maven\apache-maven-3.8.1-bin\apache-maven-3.8.1\bin\m2.conf  -Dfile.encoding=UTF-8   -s D:\Apache\maven\apache-maven-3.8.1-bin\apache-maven-3.8.1\conf\settings.xml -Dmaven.repo.local=D:\Apache\maven-repository -DskipTests=true package

```

```java
错误

Exception in thread "main" javassist.CannotCompileException: [source error] ; is missing
	at javassist.CtBehavior.setBody(CtBehavior.java:446)
	at javassist.CtBehavior.setBody(CtBehavior.java:412)
	at com.jstudy.javassist.EnhanceJedis.genMethod(EnhanceJedis.java:19)
	at com.jstudy.javassist.EnhanceJedis.main(EnhanceJedis.java:30)
Caused by: compile error: ; is missing
	at javassist.compiler.Parser.parseDeclarationOrExpression(Parser.java:594)
	at javassist.compiler.Parser.parseStatement(Parser.java:277)
	at javassist.compiler.Parser.parseBlock(Parser.java:289)
	at javassist.compiler.Parser.parseStatement(Parser.java:243)
	at javassist.compiler.Javac.compileBody(Javac.java:214)
	at javassist.CtBehavior.setBody(CtBehavior.java:438)
	... 3 more
	
经过google，得知错误在于：javassist中写入函数体中含有范型时时：

1.对于范型符号需要特殊处理

2.对饮用的外部类显式声明包路径

    源代码
        StringBuffer stringBuffer = new StringBuffer();
        stringBuffer.append("{\n");
        stringBuffer.append("Map<String, String> tags = new HashMap<>();");
        stringBuffer.append("\n}");
 
        newCtMethod.setBody(stringBuffer.toString());
        ctClass.addMethod(newCtMethod);
        
 	修复之后的
        StringBuffer stringBuffer = new StringBuffer();
        stringBuffer.append("{\n");
        stringBuffer.append("java.util.Map/*<String, String>*/ tags = new java.util.HashMap/*<>*/();");
        stringBuffer.append("return null;\n}");
 
        newCtMethod.setBody(stringBuffer.toString());
        ctClass.addMethod(newCtMethod);
```

