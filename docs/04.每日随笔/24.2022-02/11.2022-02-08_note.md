---
title: 2022-02-08_note
date: 2022-11-13 23:10:11
permalink: /pages/e804ed/
categories:
  - 每日随笔
  - 2022-02
tags:
  - 
---
**mood:** :smile:  									**date: 2022-02-08**  
## 今日计划  
------
- [ ]  
## 明日计划  
------
- [ ]  
## 随写 
------

微信支付退款支持单笔交易分多次退款（不超50次），多次退款需要提交原支付订单的商户订单号和设置不同的退款单号。申请退款总金额不能超过订单金额。 一笔退款失败后重新提交，请不要更换退款单号，请使用原商户退款单号

支付宝退款支持单笔交易分多次退款，同一笔交易的退款至少间隔3s后发起



```java

访问地址：http://YOUR_IP:5244/

配置文件：/opt/alist/data/config.json
初始管理密码：f7wGufc2

查看状态：systemctl status alist
启动服务：systemctl start alist
重启服务：systemctl restart alist
停止服务：systemctl stop alist

温馨提示：如果端口无法正常访问，请检查 服务器安全组、本机防火墙、Alist状态

```





## mysql 的客户端和服务端结构

客户端负责接收用户的命令，并且发送给服务端

服务端负责接收客户端的命令，并进行处理，返回给客户端



## bin目录下的可执行文件

![image-20220208163519036](https://img.ggball.top/picGo/image-20220208163519036.png)



## unix环境下启动mysql server

mysqld

mysqld 这个可执行文件就代表着 MySQL 服务器程序，运行这个可执行文件就可以直接启动一个服务器进程。但这个命令不常用，

我们继续往下看更牛逼的启动命令。
 mysqld_safe

mysqld_safe 是一个启动脚本，它会间接的调用 mysqld ，而且还顺便启动了另外一个监控进程，这个监控进程在服务器进程挂了的

时候，可以帮助重启它。另外，使用 mysqld_safe 启动服务器程序时，它会将服务器程序的出错信息和其他诊断信息重定向到某个

文件中，产生出错日志，这样可以方便我们找出发生错误的原因。
 mysql.server

mysql.server 也是一个启动脚本，它会间接的调用 mysqld_safe ，在调用 mysql.server 时在后边指定 start参数就可以启动服务器

序了，就像这样：

mysql.server start

需要注意的是，这个 mysql.server 文件其实是一个链接文件，它的实际文件是 ../support-files/mysql.server。我使用的 macOS 操

作系统会帮我们在 bin 目录下自动创建一个指向实际文件的链接文件，如果你的操作系统没有帮你自动创建这个链接文件，那就自己

创建一个呗～ 别告诉我你不会创建链接文件，上网搜搜呗～另外，我们还可以使用 mysql.server 命令来关闭正在运行的服务器程

序，只要把 start 参数换成 stop 就好了：
mysql.server stop

 mysqld_multi

其实我们一台计算机上也可以运行多个服务器实例，也就是运行多个 MySQL 服务器进程。 mysql_multi 可执行文件可以对每一个服

务器进程的启动或停止进行监控。这个命令的使用比较复杂，本书主要是为了讲清楚 MySQL 服务器和客户端运行的过程，不会对启动多个服务器程序进行过多唠叨。



## windows下启动mysql server

手动启动

双击`bin`目录下`mysqld`文件即可

以服务的方式启动

有些时候需要长时间运行程序或者开机自启某些程序，这时候就需要把这个程序注册为windows服务

```
"完整的可执行文件路径" --install [-manual] [服务名]
```

其中的 -manual 可以省略，加上它的话表示在 Windows 系统启动的时候不自动启动该服务，否则会自动启动。

服务名 也可以省略，默认的服务名就是 MySQL 。比如我的 Windows 计算机上 mysqld 的完整路径是：

```
C:\Program Files\MySQL\MySQL Server 5.7\bin\mysqld
```

所以如果我们想把它注册为服务的话可以在命令行里这么写：

```
"C:\Program Files\MySQL\MySQL Server 5.7\bin\mysqld" --install
```

在把 mysqld 注册为 Windows 服务之后，我们就可以通过下边这个命令来启动 MySQL 服务器程序了：

```
net start MySQL
```

当然，如果你喜欢图形界面的话，你可以通过 Windows 的服务管理器通过用鼠标点点点的方式来启动和停止服务

（作为一个程序猿，还是用黑框框吧～）。关闭这个服务也非常简单，只要把上边的 start 换成 stop 就行了，就像这样：

```
net stop MySQL
```



启动mysql客户端

bin目录下有启动脚本 mysqladmin 、 mysqldump 、 mysqlcheck 等等等等，最重要的是mysqld



启动命令

```sh
mysql -h主机名 -u用户名 -p密码
```

> 各个参数的意义如下： |参数名|含义| |:--:|:--| | -h |表示服务器进程所在计算机的域名或者IP地址，如果服务器进程就运行在本机的话，可以省略这个参数，或者填 localhost 或者 127.0.0.1 。也可以写作 --host=主机名 的形式。| | -u |表示用户名。也可以写作 --user=用户名 的形式。| | -p |表示密码。也可以写作 --password=密码 的形式。**总的说，像 h、u、p 这样名称只有一个英文字母的参数称为短形式的参数，使用时前边需要加单短划线，像 host、user、password 这样大于一个英文字母的参数称为长形式的参数，使用时前边需要加双短划线。**

例子

```sh
mysql -hlocalhost -uroot -p123456
```



## 客户端连接服务端的过程

客户端进程向服务器进程发送请求并得到回复的过程本质上是一个**进程间通信的过程**。

三种方式

- TCP/IP
- windows下使用命名管道或者共享内存
- unix下使用Unix域套接字文件



## 服务器处理客户端请求

客户端进程向服务器进程发送一段文本（MySQL语句），服务器进程处理后再向客户端进程发送一段文本（处理结果）

![image-20220208173328925](https://img.ggball.top/picGo/image-20220208173328925.png)

|      |      |      |
| ---- | ---- | ---- |
|      |      |      |
|      |      |      |
|      |      |      |

