---
title: 2022-07-04_note
date: 2022-11-13 23:10:12
permalink: /pages/f98523/
categories:
  - 每日随笔
  - 2022-07
tags:
  - 
---
**mood:** :smile:  									**date: 2022-07-04**  
## 今日计划  
------
- [ ]  
- [ ]  15个单词
## 明日计划  
------
- [ ]  
## 随写 
------

线程基础

- 简介
  - 什么是线程

    **线程**（英语：thread）是[操作系统](https://baike.baidu.com/item/操作系统)能够进行运算[调度](https://baike.baidu.com/item/调度)的最小单位。

  - 线程的优先级

    ```java
    thread.setPriority(priority);
    ```

  - 线程的状态

    初始，运行，等待，阻塞，终止，超时

    ![image-20220705100436373](https://img.ggball.top/img/image-20220705100436373.png?picGo)

  - 守护线程与非守护线程

    ```java
    // 设置守护线程 
    thread1.setDaemon(true);
    ```

- 基本使用
  - 创建线程
    1. 继承Thread
    2. 实现Runnable接口
    3. 实现 Callable 接口，并结合 Future 实现
    4. 线程池创建线程
  - 启动线程
    - thread.start();
  - 停止线程
    - thread.stop();
    - thread1.interrupt();
- 线程间通信
  - volatile和synchronized关键字
    - volatile 是线程间共享的内存数据具有可见性，线程会去内存获取，而不会去缓存获取
    - synchronized关键字 完成了线程间的互斥和同步，互斥：同一时间只允许一个线程进入临界区，同步：有了互斥的话，当t1线程拿到监视器锁进入临界区，再有线程想进入，就得进入阻塞队列（wait），直到t1线程，退出临界区，释放监视器锁，通知阻塞队列中的线程（notifyAll）,等待队列里面的线程重新竞争监视器锁。
  - 等待/通知机制
    - wait(),notify(),notifyAll();
  - 管道输入/输出流
  - Thread.join()的使用
  - ThreadLocal使用



java中的锁

- 什么是锁

  - 简介

    - 锁是用来控制多个线程访问共享资源的方式

  - 锁的类型

  - 锁升级的过程

  - 锁的原则：**锁，应是私有的、不可变的、不可重用的**

    > 私有：不可让其他外部程序获取到，修改
    >
    > 不可变：因为锁的本质记录锁对象的内存地址，将这个作为唯一依据，如果变了，锁也就失效了
    >
    > 不可重用：同一把锁，只能在一个位置使用，如果被多个位置使用。如果其他代码 `synchronized(你的锁)`，而且不释放，那你的程序就永远拿不到锁，这是隐藏的风险

- 为什么要使用锁

  解决多线程操作共享资源问题。

- 如何使用锁

  - 如何造成死锁？
    - 构成循环等待
    - 互斥（天然）
    - 持有并等待
    - 不可剥夺条件

