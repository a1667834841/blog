---
title: 2022-10-24_note
date: 2022-11-13 23:10:12
permalink: /pages/246989/
categories:
  - 每日随笔
  - 2022-10
tags:
  - 
---
**mood:** :smile:  									**date: 2022-10-24**  
## 今日计划  
------
- [ ]  redis  rdb 了解
- [x]  分公司发票生成与取消
- [x]  修改便利店数据
- [ ]  便利店问题查看
- [ ]  15个单词
## 明日计划  
------
- [ ]  
## 随写 
------

便利店问题

```sql
JSD202208172900
JSD202208198266_copy
JSD202208231600097160

还有这三个有点问题，
第一个是订单被开票了，但是erp取消不了开票，
第二个是商品数量改错了，
第三个是同一个单号在erp推了两次


-- 第二个是商品数量改错了，
UPDATE `tb_settlement_commodity` 
SET `settlementDetailBillId` = 1660896009702,
`orgType` = 2,
`settlementBillId` = 'JSD202208198266_copy',
`erpSettlementBillId` = 'SA2208190000571',
`sendType` = 2,
`supplierId` = 879,
`supplierName` = '广州市美诚食品有限公司—云企',
`commodityId` = 2666,
`commodityName` = '【2022中秋】美诚花韵·玲珑-云企',
`costPrice` = 30.80,
`assessmentPrice` = 42.00,
`settlementPrice` = 45.00,
`num` = 30,
`orderNum` = 30,
`numCanInvoice` = 30,
`typeCoupons` = 0,
`isActive` = 1,
`isDelete` = 0,
`creator` = 105843,
`createTime` = '2022-08-19 16:00:02',
`modifier` = 105843,
`modifyTime` = '2022-10-20 16:40:32',
`picCover` = 'http://pic.wonderlandnet.cn/20220705/花韵玲珑-158b7f899e776.png',
`ErpSKUcode` = '0201074079',
`specification` = '-云企-其他焙烤食品',
`SKUcode` = 'SKU02010740790001',
`amountWrittenOff` = 0.00 
WHERE
	`id` = 3612;
	
DELETE from tb_settlement_commodity where id in (3613,3614);

```

加搜索条件

![image-20221024162541730](https://img.ggball.top/img/image-20221024162541730.png?picGo)





# 何为技术领导力

技术领导力不仅仅是呈现出来的技术，而是一种可以获得绝对优势的技术能力\

- **尊重技术，追求核心基础技术**。
- **追逐自动化的高效率的工具和技术，同时避免无效率的组织架构和管理。**
- 解放生产力，追逐人效的提高。
- **开发抽象和高质量的可以重用的技术组件。**
- 坚持高于社会主流的技术标准和要求。

作为一个软件工程师怎样才算是拥有“技术领导力”呢？

- **能够发现问题**。能够发现现有方案的问题。
- **能够提供解决问题的思路和方案，并能比较这些方案的优缺点**。
- **能够做正确的技术决定**。用什么样的技术、什么解决方案、怎样实现来完成一个项目。
- **能够用更优雅，更简单，更容易的方式来解决问题**。
- **能够提高代码或软件的扩展性、重用性和可维护性**。
- **能够用正确的方式管理团队**。所谓正确的方式是，一方面是，让正确的人做正确的事，并发挥每个人的潜力；另一方面是，可以提高团队的生产力和人效，找到最有价值的需求，用最少的成本实现之。并且，可以不断地提高自身和团队的标准。
- **创新能力**。能够使用新的方法新的方式解决问题，追逐新的工具和技术。



作为一个软件工程师，我们怎么让自己拥有技术领导力呢？总体来说，是四个方面。

- **扎实的基础技术**。(计算机网络，数据结构，计算机系统，任何计算机工作都离不开)
- **非同一般的学习能力**。（比较愚笨，学习更好的学习方法）
- **坚持做正确的事**。（不断学习一定是正确的）
- **不断得高对自己的要求标准**。（这点没有做）





作为一个软件工程师，我们怎么让自己拥有技术领导力呢？总体来说，是四个方面。

扎实的基础技术。(计算机网络，数据结构，计算机系统，任何计算机工作都离不开)
非同一般的学习能力。（比较愚笨，学习更好的学习方法）
坚持做正确的事。（不断学习一定是正确的）
不断得高对自己的要求标准。（这点没有做）













## rdb 机制（快照）

> RDB是Redis用来进行持久化的一种方式，是把当前内存中的数据集快照写入磁盘，也就是 Snapshot 快照（数据库中所有键值对数据）。恢复时是将快照文件直接读到内存里。RDB文件是一个经过压缩的二进制文件，由多个部分组成。

### 触发方式

手动执行命令和自动执行命令

### 如何保存和载入

	#### 保存命令

##### SAVE

save命令会阻塞 redis 服务器进程，这时redis会拒绝其他命令，直到save命令结束

![image-20221024180511535](https://img.ggball.top/img/image-20221024180511535.png?picGo)

		##### BGSAVE

bgsave命令会fork一个子线程，用来执行保存rdb日志操作，父进程仍然可以执行命令



#### 自动性间隔保存

redis save策略配置

```
save 900 1：表示900秒（15分钟）内至少有1个key的值发生变化，则执行
save 300 10：表示300秒（5分钟）内至少有1个key的值发生变化，则执行
save 60 10000：表示60秒（1分钟）内至少有10000个key的值发生变化，则执行
save ""： 该配置将会关闭RDB方式的持久化
```

redis当中会有saveparams数组 保存下策略，redis 会有一个定时任务（默认100ms）去检查保存条件是否满足，满足则执行bgsave命令

![image-20221024183511013](https://img.ggball.top/img/image-20221024183511013.png?picGo)





#### 载入rdb文件

redis 启动默认会自动载入rdb日志，载入时服务器会一直处于阻塞状态，直到载入完成

![image-20221024180816137](https://img.ggball.top/img/image-20221024180816137.png?picGo)



##### 载入的优先级

因为一般aof的日志更加全面（更新频率通常比rdb高），所以redis会优先加载aof日志，如果开启aof 优先使用aof日志还原数据库数据

aof关闭时，会采用rdb文件恢复日志

![image-20221024181522203](https://img.ggball.top/img/image-20221024181522203.png?picGo)



#### bgsave命令和save bgsave bgrewriteaof 命令之间执行的关系

- bgsave 和 save 不能同时执行，因为save会阻塞服务器进程

- bgsave  和 bgsave 也不能同时进行，因为bgsave会fork出子进程，可能会有资源竞争情况

- bgsave 和 bgrewriteaof ，按道理不影响，但是出于性能考虑，不建议出现两个进程大量写操作。



