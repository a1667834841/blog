(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{557:function(e,n,s){"use strict";s.r(n);var a=s(20),r=Object(a.a)({},(function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[s("strong",[e._v("一、OneDriveUploader介绍")])]),e._v(" "),s("p",[e._v("支持上传文件和文件夹到指定目录,并保持上传前的目录结构.\n支持命令参数使用, 方便外部程序调用.\n支持自定义上传分块大小.\n支持多线程上传(多文件同时上传).\n支持根据文件大小动态调整重试次数")]),e._v(" "),s("p",[s("strong",[e._v("二、OneDrive授权")])]),e._v(" "),s("p",[e._v("国际版, 个人版(家庭版)\n[https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=78d4dc35-7e46-42c6-9023-2d39314433a5&response_type=code&redirect_uri=http://localhost/onedrive-login&response_mode=query&scope=offline_access%20User.Read%20Files.ReadWrite.All](https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=78d4dc35-7e46-42c6-9023-2d39314433a5&response_type=code&redirect_uri=http://localhost/onedrive-login&response_mode=query&scope=offline_access User.Read Files.ReadWrite.All)")]),e._v(" "),s("p",[e._v("中国版(世纪互联)\n[https://login.chinacloudapi.cn/common/oauth2/v2.0/authorize?client_id=dfe36e60-6133-48cf-869f-4d15b8354769&response_type=code&redirect_uri=http://localhost/onedrive-login&response_mode=query&scope=offline_access%20User.Read%20Files.ReadWrite.All](https://login.chinacloudapi.cn/common/oauth2/v2.0/authorize?client_id=dfe36e60-6133-48cf-869f-4d15b8354769&response_type=code&redirect_uri=http://localhost/onedrive-login&response_mode=query&scope=offline_access User.Read Files.ReadWrite.All)")]),e._v(" "),s("p",[e._v("然后会获取到一个网址，不要关闭，后面用到。")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://gitee.com/zxqzhuzhu/imgs/raw/master/picGo/image-20210608184714881.png",alt:"image-20210608184714881"}})]),e._v(" "),s("p",[s("strong",[e._v("三、LInux下，OneDriveUploader的使用")])]),e._v(" "),s("p",[e._v("1、下载，并给权限")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("wget https://raw.githubusercontent.com/MoeClub/OneList/master/OneDriveUploader/amd64/linux/OneDriveUploader -P /usr/local/bin/\nchmod +x /usr/local/bin/OneDriveUploader\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("p",[e._v("2、初始化")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('# 国际版\nOneDriveUploader -a "url"\n# 个人版(家庭版)\nOneDriveUploader -ms -a "url"\n# 中国版(世纪互联)\nOneDriveUploader -cn -a "url"\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br")])]),s("p",[e._v("把url替换为上图浏览器中获得的地址，以http://loaclhost开头的。一次授权，以后就不会用到了。")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://zhujiwiki.com/wp-content/uploads/2019/12/oneupload-2.jpg",alt:"img"}})]),e._v(" "),s("p",[e._v("3、配置文件")]),e._v(" "),s("p",[e._v("授权成功后，就在同目录生成了配置文件 auth.json （所以，为便于操作，选择个好记的目录执行 初始化）\n修改配置文件，也可以不修改，我主要是改了线程")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://zhujiwiki.com/wp-content/uploads/2019/12/oneupload-3.jpg",alt:"img"}})]),e._v(" "),s("p",[e._v("4、使用命令，所有命令后面的参数都要有英文双引号 “”")]),e._v(" "),s("p",[e._v("-s // *必要参数，要上传的文件或文件夹\n-r // 上传到网盘中的某个目录，默认: 根目录\n-t // 线程数, 同时上传文件的个数. 默认: 2\n-b // 自定义上传分块大小, 可以提高网络吞吐量, 受限于磁盘性能和网络速度.\n-c // 配置文件路径\n-f // 开关\n// 加上 -f 参数，强制读取 auth.json 中的块大小配置和多线程配置.\n// 不加 -f 参数, 每次覆盖保存当前使用参数到 auth.json 配置文件中.\n-n // 上传单个文件时,在网盘中重命名")]),e._v(" "),s("p",[e._v("5、使用举例")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('# 将同目录下的 mm00.jpg 文件上传到 OneDrive 网盘根目录\nOneDriveUploader -s "mm00.jpg"\n\n# 将同目录下的 mm00.jpg 文件上传到 OneDrive 网盘根目录,并改名为 mm01.jpg\nOneDriveUploader -s "mm00.jpg" -n "mm01.jpg"\n\n# 将同目录下的 Download 文件夹上传到 OneDrive 网盘根目录\nOneDriveUploader -s "Download" \n\n# 将同目录下的 Download 文件夹上传到 OneDrive 网盘Test目录中\nOneDriveUploader -s "Download" -r "Test"\n\n# 将同目录下的 Download 文件夹上传到 OneDrive 网盘Test目录中, 使用 10 线程\nOneDriveUploader -t 10 -s "Download" -r "Test"\n\n# 将同目录下的 Download 文件夹上传到 OneDrive 网盘Test目录中, 使用 15 线程, 并设置分块大小为 20M\nOneDriveUploader -t 15 -b 20 -s "Download" -r "Test"\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br")])]),s("p",[e._v("6、如果文件多、大，可让程序后台运行：nohub OneDriveUploader -s “文件或目录” &")]),e._v(" "),s("p",[s("strong",[e._v("四、Windows下，OneDriveUploader的使用")])]),e._v(" "),s("p",[e._v("下载软件到英文目录，最好简单些。")]),e._v(" "),s("p",[e._v("然后 win + R，输入 cmd，进入命令行。")]),e._v(" "),s("p",[e._v("剩下的操作和Linux一样，只是文件为 OneDriveUploader.exe")]),e._v(" "),s("p",[s("strong",[e._v("五、MacOS，咱没有，就不说了。")])]),e._v(" "),s("p",[e._v("文件下载：https://github.com/MoeClub/OneList/tree/master/OneDriveUploader/amd64")]),e._v(" "),s("p",[e._v("OneDriveUploader本地下载："),s("a",{attrs:{href:"https://zhujiwiki.com/wp-content/uploads/2019/12/OneDriveUploader-20191205.zip",target:"_blank",rel:"noopener noreferrer"}},[e._v("OneDriveUploader-20191205"),s("OutboundLink")],1)]),e._v(" "),s("p",[e._v("另外，loc有网友做了个更傻瓜的win下客户端："),s("a",{attrs:{href:"https://www.hostloc.com/thread-622498-1-1.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("ODUG"),s("OutboundLink")],1),e._v("，"),s("strong",[e._v("本地下载")]),e._v("："),s("a",{attrs:{href:"https://zhujiwiki.com/wp-content/uploads/2019/12/ODUG-OneDrive%E4%B8%8A%E4%BC%A0%E5%B7%A5%E5%85%B7.zip",target:"_blank",rel:"noopener noreferrer"}},[e._v("ODUG–OneDrive上传工具"),s("OutboundLink")],1)]),e._v(" "),s("p",[e._v("设定说明\nOneDrive目录：如目录不存在将自动创建目录\n线程：多线程上传，默认3，可自行修改\n块大小：上传分块大小，默认10MB，可自行修改")]),e._v(" "),s("p",[e._v("注：\n1、软件支持单文件和目录上传\n2、上传到OneDrive只支持根目录和二级目录，不支持三级目录\n3、软件目录可整体移动，目录内文件不可移动，不可改名，不可缺失，否则将不可使用！")]),e._v(" "),s("p",[s("strong",[e._v("六、自动上传文件到OneDrive后，自动删除文件")])]),e._v(" "),s("p",[e._v("需要同时使用 Aria2 和 OneDriveUploader。")]),e._v(" "),s("p",[e._v("在 /root 下新建 rcup.sh")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('#!/bin/bash\n\nGID="$1";\nFileNum="$2";\nFile="$3";\nMaxSize="15728640";\nThread="3";  #默认3线程，自行修改，服务器配置不好的话，不建议太多\nBlock="20";  #默认分块20m，自行修改\nRemoteDIR="";  #上传到Onedrive的路径，默认为根目录，如果要上传到MOERATS目录，""里面请填成MOERATS\nLocalDIR="/www/download/";  #Aria2下载目录，记得最后面加上/\nUploader="/usr/local/bin/OneDriveUploader";  #上传的程序完整路径，默认为本文安装的目录\nConfig="/root/auth.json";  #初始化生成的配置auth.json绝对路径，参考前面\n\n\nif [[ -z $(echo "$FileNum" |grep -o \'[0-9]*\' |head -n1) ]]; then FileNum=\'0\'; fi\nif [[ "$FileNum" -le \'0\' ]]; then exit 0; fi\nif [[ "$#" != \'3\' ]]; then exit 0; fi\n\nfunction LoadFile(){\n  if [[ ! -e "${Uploader}" ]]; then return; fi\n  IFS_BAK=$IFS\n  IFS=$\'\\n\'\n  tmpFile="$(echo "${File/#$LocalDIR}" |cut -f1 -d\'/\')"\n  FileLoad="${LocalDIR}${tmpFile}"\n  if [[ ! -e "${FileLoad}" ]]; then return; fi\n  ItemSize=$(du -s "${FileLoad}" |cut -f1 |grep -o \'[0-9]*\' |head -n1)\n  if [[ -z "$ItemSize" ]]; then return; fi\n  if [[ "$ItemSize" -ge "$MaxSize" ]]; then\n    echo -ne "\\033[33m${FileLoad} \\033[0mtoo large to spik.\\n";\n    return;\n  fi\n  ${Uploader} -c "${Config}" -t "${Thread}" -b "${Block}" -s "${FileLoad}" -r "${RemoteDIR}"\n  if [[ $? == \'0\' ]]; then\n    rm -rf "${FileLoad}";\n  fi\n  IFS=$IFS_BAK\n}\nLoadFile;\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br"),s("span",{staticClass:"line-number"},[e._v("25")]),s("br"),s("span",{staticClass:"line-number"},[e._v("26")]),s("br"),s("span",{staticClass:"line-number"},[e._v("27")]),s("br"),s("span",{staticClass:"line-number"},[e._v("28")]),s("br"),s("span",{staticClass:"line-number"},[e._v("29")]),s("br"),s("span",{staticClass:"line-number"},[e._v("30")]),s("br"),s("span",{staticClass:"line-number"},[e._v("31")]),s("br"),s("span",{staticClass:"line-number"},[e._v("32")]),s("br"),s("span",{staticClass:"line-number"},[e._v("33")]),s("br"),s("span",{staticClass:"line-number"},[e._v("34")]),s("br"),s("span",{staticClass:"line-number"},[e._v("35")]),s("br"),s("span",{staticClass:"line-number"},[e._v("36")]),s("br"),s("span",{staticClass:"line-number"},[e._v("37")]),s("br"),s("span",{staticClass:"line-number"},[e._v("38")]),s("br")])]),s("p",[e._v("给权限")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("chmod +x rcup.sh\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("然后在Aria2配置文件中加上一行，然后重启Aria2。")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("on-download-complete=/root/rcup.sh\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("执行")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("bash /root/rcup.sh\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("如果报错，解决方法。")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("1、安装dos2unix\nCentos：yum install dos2unix -y\nDebian/Ubuntu：apt install dos2unix -y\n2、转换格式\ndos2unix /root/rcup.sh\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br")])]),s("p",[e._v("如何使用aria2")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("谷歌浏览器插件aria2 for chrome\n自己安装AriaNg\n安卓手机软件aria2app\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[e._v("本机目录")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("D:\\project\\idea\\OneList\\OneDriveUploader\\amd64\\win>\\OneDriveUploader.exe\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])])])}),[],!1,null,null,null);n.default=r.exports}}]);